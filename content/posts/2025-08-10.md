+++
date = '2025-08-06T00:05:12+08:00'
draft = true
title = '学习一个东西最快的东西还是文档'
+++
解决容器起不来的问题，k3s内置的containerd有时候会出现幽灵镜像的问题，就是镜像存在但是pod还是起不来，重启了一下进程就好了。

看下dify有什么新功能吗？好像还是没太大变化。 Qwen-image 的模型发布了，可以在图片中插入文字了，还不错。

cloudpods 还自己搞了一个infomer，挺简单的一个。

Kubernetes 的 API Server 监听的 6443 端口 使用的是 普通的 HTTPS 协议，而不是 gRPC。

它通过 HTTPS 提供一个 RESTful API，用于处理集群内部和外部发来的请求，进行资源的创建、更新、删除和查询等操作。

虽然 gRPC 也是一种高性能的通信协议，但在 Kubernetes 的核心 API Server 中，HTTPS/RESTful API 是标准且默认的通信方式。

[国投瑞银 Kubernetes 双集群高可用架构设计实践](https://www.infoq.cn/article/NDsemsR45vqxLlwgNo73) ，用了双机房双集群，没有用联邦，用了istio的多主方案。

喵了眼 aliyun 的cloudDNS服务，看了下aicon相关的ppt分享。

[特斯拉如何在 ClickHouse 上构建了一个万亿规模的观测平台](https://clickhouse.com/blog/how-tesla-built-quadrillion-scale-observability-platform-on-clickhouse) 做了一个PromQL到SQL的转换层。

差不多把cloudpods的文档全部读了一遍。

要被OVS和OVN的关系搞晕了，还有什么openFlow控制器。

GPT5 发布了，感觉好像没什么变化的，应该是我的错觉，但是画图挺好用的。

看了下现有测试的k8s集群，etcd没有使用vip，APIServer使用keepalived和haproxy实现的高可用

k3s的localpath pv还是用job的pod创建的。

OVN 命令作用一览
OVN（Open Virtual Network）是 Open vSwitch（OVS）的一个扩展，它为虚拟网络提供了一套更高层次的抽象，让云管理系统（CMS）能更方便地配置和管理网络。您提到的这些命令和守护进程（daemon）都属于 OVN 架构中的关键组件。

核心守护进程
这些是 OVN 架构中的核心服务，通常以守护进程的形式运行。

ovn-northd：这是一个中央守护进程，在整个 OVN 部署中只运行一个实例。它的主要职责是将**北向数据库（Northbound DB）中定义的逻辑网络配置（如逻辑交换机、逻辑路由器等）转换成南向数据库（Southbound DB）**中的逻辑流（logical flows）。简而言之，它负责将人类可读的抽象配置翻译成底层的网络规则。

ovn-controller：这是一个在每个物理主机或虚拟机监控器（hypervisor）上运行的本地控制器守护进程。它连接到南向数据库，将南向数据库中的逻辑流转换成实际的 OpenFlow 流，并将其安装到该主机上的 Open vSwitch 实例中。它是实现虚拟网络连接到物理网络的关键桥梁。

ovn-controller-vtep：这是 OVN-controller 的一个变体，专门用于支持具备 VTEP（VXLAN Tunnel Endpoint）功能的物理交换机。它连接到南向数据库和 VTEP 硬件，将 OVN 的逻辑网络配置应用到物理网络设备上。

管理和调试工具
这些是用于与 OVN 数据库交互以及进行故障排查的工具。

ovn-nbctl：这是用于与**北向数据库（Northbound DB）**进行交互的命令行工具。管理员或云管理系统可以使用它来配置逻辑网络，例如创建逻辑交换机、逻辑端口、ACL（访问控制列表）等。

ovn-sbctl：这是用于与**南向数据库（Southbound DB）**进行交互的命令行工具。它允许查看南向数据库中的信息，比如逻辑流、物理主机（chassis）状态以及端口绑定情况。

ovn-trace：这是一个非常有用的调试工具，用于模拟数据包在 OVN 逻辑网络中的转发路径。你可以指定一个假想的数据包（microflow），然后 ovn-trace 会模拟它的旅程，帮助你理解数据包会经过哪些逻辑流、会发生什么动作，最终到达哪里。这对于排查网络配置错误非常有效。

ovn-detrace：这个工具的作用是反向解码 ovn-trace 的输出。它将 ovn-trace 产生的原始逻辑流输出，转换成更易于理解的、结构化的格式，方便分析。

## 生活

武汉大学的男生真是可怜，但是好像又不能为他做点事情。

才发现《喜剧之王单口季2》开播了，在YouTube上面看来几集，还可以。
