[{"content":"Mac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\n也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\n结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\npip 首先访问 pypi.org 获取包的元数据 然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件 files.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件 然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M Mac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\n也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\n结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\npip 首先访问 pypi.org 获取包的元数据 然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件 files.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件 然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M\npyroscope.ebpf \u0026#34;instance\u0026#34; { forward_to = [pyroscope.write.endpoint.receiver] targets = discovery.relabel.agent.output } pyroscope.scrape \u0026#34;local\u0026#34; { forward_to = [pyroscope.write.endpoint.receiver] targets = [ {\u0026#34;__address__\u0026#34; = \u0026#34;localhost:12345\u0026#34;, \u0026#34;service_name\u0026#34;=\u0026#34;grafana/agent\u0026#34;}, ] } pyroscope.write \u0026#34;endpoint\u0026#34; { endpoint { basic_auth { password = \u0026#34;\u0026lt;PASSWORD\u0026gt;\u0026#34; username = \u0026#34;\u0026lt;USERNAME\u0026gt;\u0026#34; } url = \u0026#34;\u0026lt;URL\u0026gt;\u0026#34; } external_labels = { \u0026#34;env\u0026#34; = \u0026#34;prod\u0026#34;, \u0026#34;instance\u0026#34; = env(\u0026#34;HOSTNAME\u0026#34;), } } ","permalink":"http://localhost:1313/posts/hello-world/","summary":"\u003cp\u003eMac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\u003c/p\u003e\n\u003cp\u003e也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\u003c/p\u003e\n\u003cp\u003e结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\u003c/p\u003e\n\u003cp\u003epip 首先访问 pypi.org 获取包的元数据\n然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件\nfiles.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件\n然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M\nMac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\u003c/p\u003e","title":"Hello World"},{"content":"Mac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\n也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\n结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\npip 首先访问 pypi.org 获取包的元数据 然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件 files.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件 然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M Mac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\n也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\n结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\npip 首先访问 pypi.org 获取包的元数据 然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件 files.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件 然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M\npyroscope.ebpf \u0026#34;instance\u0026#34; { forward_to = [pyroscope.write.endpoint.receiver] targets = discovery.relabel.agent.output } pyroscope.scrape \u0026#34;local\u0026#34; { forward_to = [pyroscope.write.endpoint.receiver] targets = [ {\u0026#34;__address__\u0026#34; = \u0026#34;localhost:12345\u0026#34;, \u0026#34;service_name\u0026#34;=\u0026#34;grafana/agent\u0026#34;}, ] } pyroscope.write \u0026#34;endpoint\u0026#34; { endpoint { basic_auth { password = \u0026#34;\u0026lt;PASSWORD\u0026gt;\u0026#34; username = \u0026#34;\u0026lt;USERNAME\u0026gt;\u0026#34; } url = \u0026#34;\u0026lt;URL\u0026gt;\u0026#34; } external_labels = { \u0026#34;env\u0026#34; = \u0026#34;prod\u0026#34;, \u0026#34;instance\u0026#34; = env(\u0026#34;HOSTNAME\u0026#34;), } } ","permalink":"http://localhost:1313/posts/hello-world/","summary":"\u003cp\u003eMac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\u003c/p\u003e\n\u003cp\u003e也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\u003c/p\u003e\n\u003cp\u003e结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\u003c/p\u003e\n\u003cp\u003epip 首先访问 pypi.org 获取包的元数据\n然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件\nfiles.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件\n然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M\nMac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\u003c/p\u003e","title":"Hello World"},{"content":"Mac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\n也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\n结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\npip 首先访问 pypi.org 获取包的元数据 然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件 files.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件 然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M Mac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\n也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\n结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\npip 首先访问 pypi.org 获取包的元数据 然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件 files.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件 然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M\npyroscope.ebpf \u0026#34;instance\u0026#34; { forward_to = [pyroscope.write.endpoint.receiver] targets = discovery.relabel.agent.output } pyroscope.scrape \u0026#34;local\u0026#34; { forward_to = [pyroscope.write.endpoint.receiver] targets = [ {\u0026#34;__address__\u0026#34; = \u0026#34;localhost:12345\u0026#34;, \u0026#34;service_name\u0026#34;=\u0026#34;grafana/agent\u0026#34;}, ] } pyroscope.write \u0026#34;endpoint\u0026#34; { endpoint { basic_auth { password = \u0026#34;\u0026lt;PASSWORD\u0026gt;\u0026#34; username = \u0026#34;\u0026lt;USERNAME\u0026gt;\u0026#34; } url = \u0026#34;\u0026lt;URL\u0026gt;\u0026#34; } external_labels = { \u0026#34;env\u0026#34; = \u0026#34;prod\u0026#34;, \u0026#34;instance\u0026#34; = env(\u0026#34;HOSTNAME\u0026#34;), } } ","permalink":"http://localhost:1313/posts/hello-world/","summary":"\u003cp\u003eMac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\u003c/p\u003e\n\u003cp\u003e也测试过到 pypi.org 这个源的 ICMP, 也没发现什么问题.\u003c/p\u003e\n\u003cp\u003e结果今天仔细研究了一下, 发现 pip 的安装逻辑大概是这样的:\u003c/p\u003e\n\u003cp\u003epip 首先访问 pypi.org 获取包的元数据\n然后会被重定向到 files.pythonhosted.org 这个 CDN 服务器下载实际的包文件\nfiles.pythonhosted.org 是 PyPI 的文件托管服务,用于存储和分发包文件\n然后我尝试在 oracle 机器上 ping 一下 pythonhosted.org, 结果发现 ipv6 居然没有 CDN, 延迟高达 160M\nMac 上一直用的一台 G 口 Oracle 作为出口的代理来上网, 结果发现每次用 Oracle 的出口进行 pip 安装包时都特别慢, 速度大概 100KBps 不到, 换其他的出口就一点问题都没有, 之前尝试过换 DNS 也没啥用.\u003c/p\u003e","title":"Hello World"},{"content":"今日到达大理后，先游玩大理古城。漫步在古城的各条街道，感受古城的生活气息；之后前往崇圣寺三塔公园，近距离接触大理国时期皇家寺院仅存的古迹；再到三塔南侧的三塔倒影公园，这里可以拍到三塔在水潭里的倒影，最佳拍摄时间是16:00-17:00。傍晚回到大理古城，开始大理的夜生活，夜间的人民路才真正的热闹起来。\n今日到达大理后，先游玩大理古城。漫步在古城的各条街道，感受古城的生活气息；之后前往崇圣寺三塔公园，近距离接触大理国时期皇家寺院仅存的古迹；再到三塔南侧的三塔倒影公园，这里可以拍到三塔在水潭里的倒影，最佳拍摄时间是16:00-17:00。傍晚回到大理古城，开始大理的夜生活，夜间的人民路才真正的热闹起来。\n今日到达大理后，先游玩大理古城。漫步在古城的各条街道，感受古城的生活气息；之后前往崇圣寺三塔公园，近距离接触大理国时期皇家寺院仅存的古迹；再到三塔南侧的三塔倒影公园，这里可以拍到三塔在水潭里的倒影，最佳拍摄时间是16:00-17:00。傍晚回到大理古城，开始大理的夜生活，夜间的人民路才真正的热闹起来。\npyroscope.ebpf \u0026#34;instance\u0026#34; { forward_to = [pyroscope.write.endpoint.receiver] targets = discovery.relabel.agent.output } pyroscope.scrape \u0026#34;local\u0026#34; { forward_to = [pyroscope.write.endpoint.receiver] targets = [ {\u0026#34;__address__\u0026#34; = \u0026#34;localhost:12345\u0026#34;, \u0026#34;service_name\u0026#34;=\u0026#34;grafana/agent\u0026#34;}, ] } pyroscope.write \u0026#34;endpoint\u0026#34; { endpoint { basic_auth { password = \u0026#34;\u0026lt;PASSWORD\u0026gt;\u0026#34; username = \u0026#34;\u0026lt;USERNAME\u0026gt;\u0026#34; } url = \u0026#34;\u0026lt;URL\u0026gt;\u0026#34; } external_labels = { \u0026#34;env\u0026#34; = \u0026#34;prod\u0026#34;, \u0026#34;instance\u0026#34; = env(\u0026#34;HOSTNAME\u0026#34;), } } ","permalink":"http://localhost:1313/posts/hello-world/","summary":"\u003cp\u003e今日到达大理后，先游玩大理古城。漫步在古城的各条街道，感受古城的生活气息；之后前往崇圣寺三塔公园，近距离接触大理国时期皇家寺院仅存的古迹；再到三塔南侧的三塔倒影公园，这里可以拍到三塔在水潭里的倒影，最佳拍摄时间是16:00-17:00。傍晚回到大理古城，开始大理的夜生活，夜间的人民路才真正的热闹起来。\u003c/p\u003e\n\u003cp\u003e今日到达大理后，先游玩大理古城。漫步在古城的各条街道，感受古城的生活气息；之后前往崇圣寺三塔公园，近距离接触大理国时期皇家寺院仅存的古迹；再到三塔南侧的三塔倒影公园，这里可以拍到三塔在水潭里的倒影，最佳拍摄时间是16:00-17:00。傍晚回到大理古城，开始大理的夜生活，夜间的人民路才真正的热闹起来。\u003c/p\u003e\n\u003cp\u003e今日到达大理后，先游玩大理古城。漫步在古城的各条街道，感受古城的生活气息；之后前往崇圣寺三塔公园，近距离接触大理国时期皇家寺院仅存的古迹；再到三塔南侧的三塔倒影公园，这里可以拍到三塔在水潭里的倒影，最佳拍摄时间是16:00-17:00。傍晚回到大理古城，开始大理的夜生活，夜间的人民路才真正的热闹起来。\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e\npyroscope.ebpf \u0026#34;instance\u0026#34; {\n forward_to     = [pyroscope.write.endpoint.receiver]\n targets = discovery.relabel.agent.output\n}\n\npyroscope.scrape \u0026#34;local\u0026#34; {\n  forward_to     = [pyroscope.write.endpoint.receiver]\n  targets    = [\n    {\u0026#34;__address__\u0026#34; = \u0026#34;localhost:12345\u0026#34;, \u0026#34;service_name\u0026#34;=\u0026#34;grafana/agent\u0026#34;},\n  ]\n}\n\npyroscope.write \u0026#34;endpoint\u0026#34; {\n endpoint {\n  basic_auth {\n   password = \u0026#34;\u0026lt;PASSWORD\u0026gt;\u0026#34;\n   username = \u0026#34;\u0026lt;USERNAME\u0026gt;\u0026#34;\n  }\n  url = \u0026#34;\u0026lt;URL\u0026gt;\u0026#34;\n }\n external_labels = {\n  \u0026#34;env\u0026#34;      = \u0026#34;prod\u0026#34;,\n  \u0026#34;instance\u0026#34; = env(\u0026#34;HOSTNAME\u0026#34;),\n }\n}\n\u003c/code\u003e\u003c/pre\u003e","title":"Hello World"}]