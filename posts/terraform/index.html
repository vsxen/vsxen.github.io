<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> terraform provider Kubernetes 入门 | Cactus theme example</title>
  <link rel = 'canonical' href = 'https://example.com/posts/terraform/'>
  <meta name="description" content="随便记录点东西">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="terraform provider Kubernetes 入门" />
<meta property="og:description" content="下载
初始化 terraform 扩展主要靠的就是provider，所以在使用之前需要准备好或者下载对应的provider。至于你需要什么provider，需要在main.tf指定，如下所示。
如果可以联网的话，貌似会从fastly的CDN上下载，默认放在~/.terraform/plugins目录，离线安装或者自己build的话也可以放在对应的目录即可。
terraform默认会读取kubeconfig的默认配置，有点绕口，也可以自己配置对应的证书或者basic auth，这一点可以去看官方文档，我配置的就是读取默认配置。然后就就可以初始化去下载k8s的provider了。
1cat main.tf 2provider &#34;kubernetes&#34; {} 3# 初始化 4terraform init 5 6Initializing the backend... 7 8Initializing provider plugins... 9- Checking for available provider plugins... 10- Downloading plugin for provider &#34;kubernetes&#34; (hashicorp/kubernetes) 1.9.0... 11 12The following providers do not have any version constraints in configuration, 13so the latest version was installed. 14 15To prevent automatic upgrades to new major versions that may contain breaking 16changes, it is recommended to add version = &#34;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/posts/terraform/" />
<meta property="article:published_time" content="2018-09-17T11:31:20+08:00" />
<meta property="article:modified_time" content="2018-09-17T11:31:20+08:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="terraform provider Kubernetes 入门"/>
<meta name="twitter:description" content="下载
初始化 terraform 扩展主要靠的就是provider，所以在使用之前需要准备好或者下载对应的provider。至于你需要什么provider，需要在main.tf指定，如下所示。
如果可以联网的话，貌似会从fastly的CDN上下载，默认放在~/.terraform/plugins目录，离线安装或者自己build的话也可以放在对应的目录即可。
terraform默认会读取kubeconfig的默认配置，有点绕口，也可以自己配置对应的证书或者basic auth，这一点可以去看官方文档，我配置的就是读取默认配置。然后就就可以初始化去下载k8s的provider了。
1cat main.tf 2provider &#34;kubernetes&#34; {} 3# 初始化 4terraform init 5 6Initializing the backend... 7 8Initializing provider plugins... 9- Checking for available provider plugins... 10- Downloading plugin for provider &#34;kubernetes&#34; (hashicorp/kubernetes) 1.9.0... 11 12The following providers do not have any version constraints in configuration, 13so the latest version was installed. 14 15To prevent automatic upgrades to new major versions that may contain breaking 16changes, it is recommended to add version = &#34;."/>

  
  
    
  
  
  <link rel="stylesheet" href="https://example.com/css/styles.b7d947e05a1170a37e8b82db035a37baf568e98c7fcbe3f9dd31eac5e6a72150f9f731721fa60a1b3eed4c6a9db9c5a706d396767b698198aeea1614f88ce960.css" integrity="sha512-t9lH4FoRcKN&#43;i4LbA1o3uvVo6Yx/y&#43;P53THqxeanIVD59zFyH6YKGz7tTGqducWnBtOWdntpgZiu6hYU&#43;IzpYA=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://example.com/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://example.com/posts/promethus/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://example.com/posts/cluster-autoscaler/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fexample.com%2fposts%2fterraform%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&text=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&title=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&is_video=false&description=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8&body=Check out this article: https%3a%2f%2fexample.com%2fposts%2fterraform%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&title=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&title=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&name=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8&description=%e4%b8%8b%e8%bd%bd%0a%e5%88%9d%e5%a7%8b%e5%8c%96%20terraform%20%e6%89%a9%e5%b1%95%e4%b8%bb%e8%a6%81%e9%9d%a0%e7%9a%84%e5%b0%b1%e6%98%afprovider%ef%bc%8c%e6%89%80%e4%bb%a5%e5%9c%a8%e4%bd%bf%e7%94%a8%e4%b9%8b%e5%89%8d%e9%9c%80%e8%a6%81%e5%87%86%e5%a4%87%e5%a5%bd%e6%88%96%e8%80%85%e4%b8%8b%e8%bd%bd%e5%af%b9%e5%ba%94%e7%9a%84provider%e3%80%82%e8%87%b3%e4%ba%8e%e4%bd%a0%e9%9c%80%e8%a6%81%e4%bb%80%e4%b9%88provider%ef%bc%8c%e9%9c%80%e8%a6%81%e5%9c%a8main.tf%e6%8c%87%e5%ae%9a%ef%bc%8c%e5%a6%82%e4%b8%8b%e6%89%80%e7%a4%ba%e3%80%82%0a%e5%a6%82%e6%9e%9c%e5%8f%af%e4%bb%a5%e8%81%94%e7%bd%91%e7%9a%84%e8%af%9d%ef%bc%8c%e8%b2%8c%e4%bc%bc%e4%bc%9a%e4%bb%8efastly%e7%9a%84CDN%e4%b8%8a%e4%b8%8b%e8%bd%bd%ef%bc%8c%e9%bb%98%e8%ae%a4%e6%94%be%e5%9c%a8~%2f.terraform%2fplugins%e7%9b%ae%e5%bd%95%ef%bc%8c%e7%a6%bb%e7%ba%bf%e5%ae%89%e8%a3%85%e6%88%96%e8%80%85%e8%87%aa%e5%b7%b1build%e7%9a%84%e8%af%9d%e4%b9%9f%e5%8f%af%e4%bb%a5%e6%94%be%e5%9c%a8%e5%af%b9%e5%ba%94%e7%9a%84%e7%9b%ae%e5%bd%95%e5%8d%b3%e5%8f%af%e3%80%82%0aterraform%e9%bb%98%e8%ae%a4%e4%bc%9a%e8%af%bb%e5%8f%96kubeconfig%e7%9a%84%e9%bb%98%e8%ae%a4%e9%85%8d%e7%bd%ae%ef%bc%8c%e6%9c%89%e7%82%b9%e7%bb%95%e5%8f%a3%ef%bc%8c%e4%b9%9f%e5%8f%af%e4%bb%a5%e8%87%aa%e5%b7%b1%e9%85%8d%e7%bd%ae%e5%af%b9%e5%ba%94%e7%9a%84%e8%af%81%e4%b9%a6%e6%88%96%e8%80%85basic%20auth%ef%bc%8c%e8%bf%99%e4%b8%80%e7%82%b9%e5%8f%af%e4%bb%a5%e5%8e%bb%e7%9c%8b%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%ef%bc%8c%e6%88%91%e9%85%8d%e7%bd%ae%e7%9a%84%e5%b0%b1%e6%98%af%e8%af%bb%e5%8f%96%e9%bb%98%e8%ae%a4%e9%85%8d%e7%bd%ae%e3%80%82%e7%84%b6%e5%90%8e%e5%b0%b1%e5%b0%b1%e5%8f%af%e4%bb%a5%e5%88%9d%e5%a7%8b%e5%8c%96%e5%8e%bb%e4%b8%8b%e8%bd%bdk8s%e7%9a%84provider%e4%ba%86%e3%80%82%0a1cat%20main.tf%202provider%20%26%2334%3bkubernetes%26%2334%3b%20%7b%7d%203%23%20%e5%88%9d%e5%a7%8b%e5%8c%96%204terraform%20init%205%206Initializing%20the%20backend...%207%208Initializing%20provider%20plugins...%209-%20Checking%20for%20available%20provider%20plugins...%2010-%20Downloading%20plugin%20for%20provider%20%26%2334%3bkubernetes%26%2334%3b%20%28hashicorp%2fkubernetes%29%201.9.0...%2011%2012The%20following%20providers%20do%20not%20have%20any%20version%20constraints%20in%20configuration%2c%2013so%20the%20latest%20version%20was%20installed.%2014%2015To%20prevent%20automatic%20upgrades%20to%20new%20major%20versions%20that%20may%20contain%20breaking%2016changes%2c%20it%20is%20recommended%20to%20add%20version%20%3d%20%26%2334%3b." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&t=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#初始化">初始化</a></li>
        <li><a href="#发布">发布</a></li>
        <li><a href="#更新">更新</a></li>
        <li><a href="#其他">其他？</a></li>
        <li><a href="#ref">Ref</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        terraform provider Kubernetes 入门
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2018-09-17 11:31:20 &#43;0800 CST" itemprop="datePublished">2018-09-17</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          5 minute read
        </div>
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/k8s" rel="tag">k8s</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <p>下载</p>
<h3 id="初始化">初始化</h3>
<p>terraform 扩展主要靠的就是provider，所以在使用之前需要准备好或者下载对应的provider。至于你需要什么provider，需要在<code>main.tf</code>指定，如下所示。</p>
<p>如果可以联网的话，貌似会从fastly的CDN上下载，默认放在<code>~/.terraform/plugins</code>目录，离线安装或者自己build的话也可以放在对应的目录即可。</p>
<p>terraform默认会读取kubeconfig的默认配置，有点绕口，也可以自己配置对应的证书或者basic auth，这一点可以去看官方文档，我配置的就是读取默认配置。然后就就可以初始化去下载k8s的provider了。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>cat main.tf
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>provider <span style="color:#f1fa8c">&#34;kubernetes&#34;</span> <span style="color:#ff79c6">{}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#6272a4"># 初始化</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>terraform init
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>Initializing the backend...
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>Initializing provider plugins...
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>- Checking <span style="color:#ff79c6">for</span> available provider plugins...
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>- Downloading plugin <span style="color:#ff79c6">for</span> provider <span style="color:#f1fa8c">&#34;kubernetes&#34;</span> <span style="color:#ff79c6">(</span>hashicorp/kubernetes<span style="color:#ff79c6">)</span> 1.9.0...
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>The following providers <span style="color:#ff79c6">do</span> not have any version constraints in configuration,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>so the latest version was installed.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>To prevent automatic upgrades to new major versions that may contain breaking
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>changes, it is recommended to add <span style="color:#8be9fd;font-style:italic">version</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;...&#34;</span> constraints to the
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>corresponding provider blocks in configuration, with the constraint strings
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>suggested below.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>* provider.kubernetes: <span style="color:#8be9fd;font-style:italic">version</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;~&gt; 1.9&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>Terraform has been successfully initialized!
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>You may now begin working with Terraform. Try running <span style="color:#f1fa8c">&#34;terraform plan&#34;</span> to see
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>any changes that are required <span style="color:#ff79c6">for</span> your infrastructure. All Terraform commands
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>should now work.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>If you ever <span style="color:#8be9fd;font-style:italic">set</span> or change modules or backend configuration <span style="color:#ff79c6">for</span> Terraform,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>rerun this <span style="color:#8be9fd;font-style:italic">command</span> to reinitialize your working directory. If you forget, other
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>commands will detect it and remind you to <span style="color:#ff79c6">do</span> so <span style="color:#ff79c6">if</span> necessary.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span style="color:#6272a4"># 默认provider的下载路径</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>ls ~/.terraform/plugins/linux_amd64/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span>lock.json  terraform-provider-kubernetes_v1.9.0_x4
</code></pre></div><h3 id="发布">发布</h3>
<p>terraform默认读取的是当前文件目录所有的.tf的文件，首先我们创建一个nginx的pod，如下所示，定义一些必要的参数，然后就可以发布到k8s上面了。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>cat nginx.tf
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>resource <span style="color:#f1fa8c">&#34;kubernetes_pod&#34;</span> <span style="color:#f1fa8c">&#34;nginx&#34;</span> <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>  metadata <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>    <span style="color:#8be9fd;font-style:italic">name</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;nginx-example&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>    <span style="color:#8be9fd;font-style:italic">labels</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>      <span style="color:#8be9fd;font-style:italic">App</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;nginx&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>    <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  spec <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>    container <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>      <span style="color:#8be9fd;font-style:italic">image</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;nginx:1.1&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>      <span style="color:#8be9fd;font-style:italic">name</span>  <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;example&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>      port <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>        <span style="color:#8be9fd;font-style:italic">container_port</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">80</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>      <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>    <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>  <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#6272a4"># 发布</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>terraform apply
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>An execution plan has been generated and is shown below.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>Resource actions are indicated with the following symbols:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>  + create
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>Terraform will perform the following actions:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span style="color:#6272a4"># 省略</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>Plan: <span style="color:#bd93f9">1</span> to add, <span style="color:#bd93f9">0</span> to change, <span style="color:#bd93f9">0</span> to destroy.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>Do you want to perform these actions?
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span>  Terraform will perform the actions described above.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span>  Only <span style="color:#f1fa8c">&#39;yes&#39;</span> will be accepted to approve.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span>  Enter a value: <span style="color:#6272a4"># 这里会二次确认一下</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span>  
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span>kubernetes_pod.nginx: Creating...
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span>kubernetes_pod.nginx: Creation <span style="color:#8be9fd;font-style:italic">complete</span> after 4s <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>default/nginx-example<span style="color:#ff79c6">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span>Apply complete! Resources: <span style="color:#bd93f9">1</span> added, <span style="color:#bd93f9">0</span> changed, <span style="color:#bd93f9">0</span> destroyed.  
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span style="color:#6272a4"># 验证</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span>$ kubectl get po
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span>NAME            READY   STATUS    RESTARTS   AGE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span>nginx-example   1/1     Running   <span style="color:#bd93f9">0</span>          18h
</code></pre></div><h3 id="更新">更新</h3>
<p>接着我们来试一下更新镜像，也就是发布流程，修改<code>nginx.tf</code>的镜像名字，然后运行<code>terraform plan</code>就能看到这一次涉及到的更改，如下所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>terraform plan
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>Refreshing Terraform state in-memory prior to plan...
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>The refreshed state will be used to calculate this plan, but will not be
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>persisted to <span style="color:#8be9fd;font-style:italic">local</span> or remote state storage.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>kubernetes_pod.nginx: Refreshing state... <span style="color:#ff79c6">[</span><span style="color:#8be9fd;font-style:italic">id</span><span style="color:#ff79c6">=</span>default/nginx-example<span style="color:#ff79c6">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>------------------------------------------------------------------------
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>An execution plan has been generated and is shown below.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>Resource actions are indicated with the following symbols:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>  ~ update in-place
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>Terraform will perform the following actions:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>  <span style="color:#6272a4"># kubernetes_pod.nginx will be updated in-place</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#6272a4"># 略</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>          ~ container <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>                <span style="color:#8be9fd;font-style:italic">args</span>                     <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>                <span style="color:#8be9fd;font-style:italic">command</span>                  <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>              ~ <span style="color:#8be9fd;font-style:italic">image</span>                    <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;nginx:alpine&#34;</span> -&gt; <span style="color:#f1fa8c">&#34;nginx:1.1&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>                <span style="color:#8be9fd;font-style:italic">image_pull_policy</span>        <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;IfNotPresent&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>                <span style="color:#8be9fd;font-style:italic">name</span>                     <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;example&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>                <span style="color:#8be9fd;font-style:italic">stdin</span>                    <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>                <span style="color:#8be9fd;font-style:italic">stdin_once</span>               <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>                <span style="color:#8be9fd;font-style:italic">termination_message_path</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;/dev/termination-log&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>                <span style="color:#8be9fd;font-style:italic">tty</span>                      <span style="color:#ff79c6">=</span> <span style="color:#8be9fd;font-style:italic">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>                port <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>                    <span style="color:#8be9fd;font-style:italic">container_port</span> <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">80</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>                    <span style="color:#8be9fd;font-style:italic">host_port</span>      <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>                    <span style="color:#8be9fd;font-style:italic">protocol</span>       <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;TCP&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span>                <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span>                resources <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span>                <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span>            <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span>        <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span>    <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span>Plan: <span style="color:#bd93f9">0</span> to add, <span style="color:#bd93f9">1</span> to change, <span style="color:#bd93f9">0</span> to destroy.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span>------------------------------------------------------------------------
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span>Note: You didn<span style="color:#f1fa8c">&#39;t specify an &#34;-out&#34; parameter to save this plan, so Terraform
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span style="color:#f1fa8c">can&#39;</span>t guarantee that exactly these actions will be performed <span style="color:#ff79c6">if</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span><span style="color:#f1fa8c">&#34;terraform apply&#34;</span> is subsequently run.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span>
</code></pre></div><p>和kubectl的区别？kubectl提供了diff 的子命令，可以对比与正在运行的pod的区别，如下所示：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>kubectl diff -f nginxpod.yaml
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>diff -u -N /tmp/LIVE-346592871/v1.Pod.default.nginx-example /tmp/MERGED-289406106/v1.Pod.default.nginx-example
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>--- /tmp/LIVE-346592871/v1.Pod.default.nginx-example    2019-09-07 18:48:06.963341550 +0800
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>+++ /tmp/MERGED-289406106/v1.Pod.default.nginx-example  2019-09-07 18:48:06.967341550 +0800
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>@@ -12,7 +12,7 @@
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span> spec:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>   automountServiceAccountToken: <span style="color:#8be9fd;font-style:italic">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>   containers:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>-  - image: nginx:alpine
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>+  - image: nginx:1.1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>     imagePullPolicy: IfNotPresent
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>     name: example
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>     ports:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#8be9fd;font-style:italic">exit</span> status <span style="color:#bd93f9">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>
</code></pre></div><h3 id="其他">其他？</h3>
<p>本文也只是对terraform的简单使用，最多算一个入门而已，至于terraform的精华，可能还未涉及到。</p>
<p>思考</p>
<ul>
<li>多环境支持？</li>
<li>多应用维护？</li>
</ul>
<h3 id="ref">Ref</h3>
<p>Getting Started with Kubernetes provider</p>
<p><a href="https://www.terraform.io/docs/providers/kubernetes/guides/getting-started.html">https://www.terraform.io/docs/providers/kubernetes/guides/getting-started.html</a></p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Writings</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#初始化">初始化</a></li>
        <li><a href="#发布">发布</a></li>
        <li><a href="#更新">更新</a></li>
        <li><a href="#其他">其他？</a></li>
        <li><a href="#ref">Ref</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fexample.com%2fposts%2fterraform%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&text=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&title=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&is_video=false&description=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8&body=Check out this article: https%3a%2f%2fexample.com%2fposts%2fterraform%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&title=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&title=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&name=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8&description=%e4%b8%8b%e8%bd%bd%0a%e5%88%9d%e5%a7%8b%e5%8c%96%20terraform%20%e6%89%a9%e5%b1%95%e4%b8%bb%e8%a6%81%e9%9d%a0%e7%9a%84%e5%b0%b1%e6%98%afprovider%ef%bc%8c%e6%89%80%e4%bb%a5%e5%9c%a8%e4%bd%bf%e7%94%a8%e4%b9%8b%e5%89%8d%e9%9c%80%e8%a6%81%e5%87%86%e5%a4%87%e5%a5%bd%e6%88%96%e8%80%85%e4%b8%8b%e8%bd%bd%e5%af%b9%e5%ba%94%e7%9a%84provider%e3%80%82%e8%87%b3%e4%ba%8e%e4%bd%a0%e9%9c%80%e8%a6%81%e4%bb%80%e4%b9%88provider%ef%bc%8c%e9%9c%80%e8%a6%81%e5%9c%a8main.tf%e6%8c%87%e5%ae%9a%ef%bc%8c%e5%a6%82%e4%b8%8b%e6%89%80%e7%a4%ba%e3%80%82%0a%e5%a6%82%e6%9e%9c%e5%8f%af%e4%bb%a5%e8%81%94%e7%bd%91%e7%9a%84%e8%af%9d%ef%bc%8c%e8%b2%8c%e4%bc%bc%e4%bc%9a%e4%bb%8efastly%e7%9a%84CDN%e4%b8%8a%e4%b8%8b%e8%bd%bd%ef%bc%8c%e9%bb%98%e8%ae%a4%e6%94%be%e5%9c%a8~%2f.terraform%2fplugins%e7%9b%ae%e5%bd%95%ef%bc%8c%e7%a6%bb%e7%ba%bf%e5%ae%89%e8%a3%85%e6%88%96%e8%80%85%e8%87%aa%e5%b7%b1build%e7%9a%84%e8%af%9d%e4%b9%9f%e5%8f%af%e4%bb%a5%e6%94%be%e5%9c%a8%e5%af%b9%e5%ba%94%e7%9a%84%e7%9b%ae%e5%bd%95%e5%8d%b3%e5%8f%af%e3%80%82%0aterraform%e9%bb%98%e8%ae%a4%e4%bc%9a%e8%af%bb%e5%8f%96kubeconfig%e7%9a%84%e9%bb%98%e8%ae%a4%e9%85%8d%e7%bd%ae%ef%bc%8c%e6%9c%89%e7%82%b9%e7%bb%95%e5%8f%a3%ef%bc%8c%e4%b9%9f%e5%8f%af%e4%bb%a5%e8%87%aa%e5%b7%b1%e9%85%8d%e7%bd%ae%e5%af%b9%e5%ba%94%e7%9a%84%e8%af%81%e4%b9%a6%e6%88%96%e8%80%85basic%20auth%ef%bc%8c%e8%bf%99%e4%b8%80%e7%82%b9%e5%8f%af%e4%bb%a5%e5%8e%bb%e7%9c%8b%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a3%ef%bc%8c%e6%88%91%e9%85%8d%e7%bd%ae%e7%9a%84%e5%b0%b1%e6%98%af%e8%af%bb%e5%8f%96%e9%bb%98%e8%ae%a4%e9%85%8d%e7%bd%ae%e3%80%82%e7%84%b6%e5%90%8e%e5%b0%b1%e5%b0%b1%e5%8f%af%e4%bb%a5%e5%88%9d%e5%a7%8b%e5%8c%96%e5%8e%bb%e4%b8%8b%e8%bd%bdk8s%e7%9a%84provider%e4%ba%86%e3%80%82%0a1cat%20main.tf%202provider%20%26%2334%3bkubernetes%26%2334%3b%20%7b%7d%203%23%20%e5%88%9d%e5%a7%8b%e5%8c%96%204terraform%20init%205%206Initializing%20the%20backend...%207%208Initializing%20provider%20plugins...%209-%20Checking%20for%20available%20provider%20plugins...%2010-%20Downloading%20plugin%20for%20provider%20%26%2334%3bkubernetes%26%2334%3b%20%28hashicorp%2fkubernetes%29%201.9.0...%2011%2012The%20following%20providers%20do%20not%20have%20any%20version%20constraints%20in%20configuration%2c%2013so%20the%20latest%20version%20was%20installed.%2014%2015To%20prevent%20automatic%20upgrades%20to%20new%20major%20versions%20that%20may%20contain%20breaking%2016changes%2c%20it%20is%20recommended%20to%20add%20version%20%3d%20%26%2334%3b." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fexample.com%2fposts%2fterraform%2f&t=terraform%20provider%20Kubernetes%20%e5%85%a5%e9%97%a8" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2025  You 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
