<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Kubernetes中的存储 | Cactus theme example</title>
  <link rel = 'canonical' href = 'https://example.com/posts/storage-in-kubernets/'>
  <meta name="description" content="随便记录点东西">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Kubernetes中的存储" />
<meta property="og:description" content="概念 PersistentVolume PersistentVolume（持久卷，简称PV）是集群内，由管理员提供的网络存储的一部分。就像集群中的节点一样，PV也是集群中的一种资源。它也像Volume一样，是一种volume插件，但是它的生命周期却是和使用它的Pod相互独立的。PV这个API对象，捕获了诸如NFS、ISCSI、或其他云存储系统的实现细节。 https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistent-volumes
1# kubectl explain pv.spec 2# KIND: PersistentVolume 3# VERSION: v1 4# spec 5# accessModes &lt;[]string&gt; 6# capacity &lt;map[string]string&gt; 7# mountOptions &lt;[]string&gt; 部分支持，比如NFS 8# persistentVolumeReclaimPolicy &lt;string&gt; 9# storageClassName &lt;string&gt; 10# volumeMode &lt;string&gt; 11apiVersion: v1 12kind: PersistentVolume 13metadata: 14 name: block-pv 15spec: 16 accessModes: 17 - ReadWriteOnce 18 capacity: 19 storage: 10Gi 20 persistentVolumeReclaimPolicy: Retain 21 storageClassName： aliclood-nas 22 volumeMode: Block PersistentVolumeClaim PersistentVolumeClaim（持久卷声明，简称PVC）是用户的一种存储请求。它和Pod类似，Pod消耗Node资源，而PVC消耗PV资源。Pod能够请求特定的资源（如CPU和内存）。PVC能够请求指定的大小和访问的模式（可以被映射为一次读写或者多次只读）。 PVC允许用户消耗抽象的存储资源，用户也经常需要各种属性（如性能）的PV。集群管理员需要提供各种各样、不同大小、不同访问模式的PV，而不用向用户暴露这些volume如何实现的细节。因为这种需求，就催生出一种StorageClass资源。
1 # accessModes &lt;[]string&gt; 2 # storageClassName &lt;string&gt; 3 # volumeMode &lt;string&gt; 4 # volumeName &lt;string&gt; 5 # resources &lt;Object&gt; 6kind: PersistentVolumeClaim 7apiVersion: v1 8metadata: 9 name: myclaim 10spec: 11 accessModes: 12 - ReadWriteOnce 13 storageClassName: slow 14 volumeMode: Filesystem 15 resources: 16 requests: 17 storage: 8Gi StorageClass StorageClass提供了一种方式，使得管理员能够描述他提供的存储的等级。集群管理员可以将不同的等级映射到不同的服务等级、不同的后端策略。 https://kubernetes." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/posts/storage-in-kubernets/" />
<meta property="article:published_time" content="2019-05-12T22:31:20+08:00" />
<meta property="article:modified_time" content="2019-05-12T22:31:20+08:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Kubernetes中的存储"/>
<meta name="twitter:description" content="概念 PersistentVolume PersistentVolume（持久卷，简称PV）是集群内，由管理员提供的网络存储的一部分。就像集群中的节点一样，PV也是集群中的一种资源。它也像Volume一样，是一种volume插件，但是它的生命周期却是和使用它的Pod相互独立的。PV这个API对象，捕获了诸如NFS、ISCSI、或其他云存储系统的实现细节。 https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistent-volumes
1# kubectl explain pv.spec 2# KIND: PersistentVolume 3# VERSION: v1 4# spec 5# accessModes &lt;[]string&gt; 6# capacity &lt;map[string]string&gt; 7# mountOptions &lt;[]string&gt; 部分支持，比如NFS 8# persistentVolumeReclaimPolicy &lt;string&gt; 9# storageClassName &lt;string&gt; 10# volumeMode &lt;string&gt; 11apiVersion: v1 12kind: PersistentVolume 13metadata: 14 name: block-pv 15spec: 16 accessModes: 17 - ReadWriteOnce 18 capacity: 19 storage: 10Gi 20 persistentVolumeReclaimPolicy: Retain 21 storageClassName： aliclood-nas 22 volumeMode: Block PersistentVolumeClaim PersistentVolumeClaim（持久卷声明，简称PVC）是用户的一种存储请求。它和Pod类似，Pod消耗Node资源，而PVC消耗PV资源。Pod能够请求特定的资源（如CPU和内存）。PVC能够请求指定的大小和访问的模式（可以被映射为一次读写或者多次只读）。 PVC允许用户消耗抽象的存储资源，用户也经常需要各种属性（如性能）的PV。集群管理员需要提供各种各样、不同大小、不同访问模式的PV，而不用向用户暴露这些volume如何实现的细节。因为这种需求，就催生出一种StorageClass资源。
1 # accessModes &lt;[]string&gt; 2 # storageClassName &lt;string&gt; 3 # volumeMode &lt;string&gt; 4 # volumeName &lt;string&gt; 5 # resources &lt;Object&gt; 6kind: PersistentVolumeClaim 7apiVersion: v1 8metadata: 9 name: myclaim 10spec: 11 accessModes: 12 - ReadWriteOnce 13 storageClassName: slow 14 volumeMode: Filesystem 15 resources: 16 requests: 17 storage: 8Gi StorageClass StorageClass提供了一种方式，使得管理员能够描述他提供的存储的等级。集群管理员可以将不同的等级映射到不同的服务等级、不同的后端策略。 https://kubernetes."/>

  
  
    
  
  
  <link rel="stylesheet" href="https://example.com/css/styles.b7d947e05a1170a37e8b82db035a37baf568e98c7fcbe3f9dd31eac5e6a72150f9f731721fa60a1b3eed4c6a9db9c5a706d396767b698198aeea1614f88ce960.css" integrity="sha512-t9lH4FoRcKN&#43;i4LbA1o3uvVo6Yx/y&#43;P53THqxeanIVD59zFyH6YKGz7tTGqducWnBtOWdntpgZiu6hYU&#43;IzpYA=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://example.com/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://example.com/posts/use-kops-in-aws/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://example.com/posts/create-cluster-use-kubeadm/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&text=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&title=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&is_video=false&description=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8&body=Check out this article: https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&title=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&title=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&name=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8&description=%e6%a6%82%e5%bf%b5%20PersistentVolume%20PersistentVolume%ef%bc%88%e6%8c%81%e4%b9%85%e5%8d%b7%ef%bc%8c%e7%ae%80%e7%a7%b0PV%ef%bc%89%e6%98%af%e9%9b%86%e7%be%a4%e5%86%85%ef%bc%8c%e7%94%b1%e7%ae%a1%e7%90%86%e5%91%98%e6%8f%90%e4%be%9b%e7%9a%84%e7%bd%91%e7%bb%9c%e5%ad%98%e5%82%a8%e7%9a%84%e4%b8%80%e9%83%a8%e5%88%86%e3%80%82%e5%b0%b1%e5%83%8f%e9%9b%86%e7%be%a4%e4%b8%ad%e7%9a%84%e8%8a%82%e7%82%b9%e4%b8%80%e6%a0%b7%ef%bc%8cPV%e4%b9%9f%e6%98%af%e9%9b%86%e7%be%a4%e4%b8%ad%e7%9a%84%e4%b8%80%e7%a7%8d%e8%b5%84%e6%ba%90%e3%80%82%e5%ae%83%e4%b9%9f%e5%83%8fVolume%e4%b8%80%e6%a0%b7%ef%bc%8c%e6%98%af%e4%b8%80%e7%a7%8dvolume%e6%8f%92%e4%bb%b6%ef%bc%8c%e4%bd%86%e6%98%af%e5%ae%83%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%8d%b4%e6%98%af%e5%92%8c%e4%bd%bf%e7%94%a8%e5%ae%83%e7%9a%84Pod%e7%9b%b8%e4%ba%92%e7%8b%ac%e7%ab%8b%e7%9a%84%e3%80%82PV%e8%bf%99%e4%b8%aaAPI%e5%af%b9%e8%b1%a1%ef%bc%8c%e6%8d%95%e8%8e%b7%e4%ba%86%e8%af%b8%e5%a6%82NFS%e3%80%81ISCSI%e3%80%81%e6%88%96%e5%85%b6%e4%bb%96%e4%ba%91%e5%ad%98%e5%82%a8%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%ae%9e%e7%8e%b0%e7%bb%86%e8%8a%82%e3%80%82%20https%3a%2f%2fkubernetes.io%2fdocs%2fconcepts%2fstorage%2fpersistent-volumes%23persistent-volumes%0a1%23%20kubectl%20explain%20pv.spec%202%23%20KIND%3a%20PersistentVolume%203%23%20VERSION%3a%20v1%204%23%20spec%205%23%20accessModes%20%26lt%3b%5b%5dstring%26gt%3b%206%23%20capacity%20%26lt%3bmap%5bstring%5dstring%26gt%3b%207%23%20mountOptions%20%26lt%3b%5b%5dstring%26gt%3b%20%e9%83%a8%e5%88%86%e6%94%af%e6%8c%81%ef%bc%8c%e6%af%94%e5%a6%82NFS%208%23%20persistentVolumeReclaimPolicy%20%26lt%3bstring%26gt%3b%209%23%20storageClassName%20%26lt%3bstring%26gt%3b%2010%23%20volumeMode%20%26lt%3bstring%26gt%3b%2011apiVersion%3a%20v1%2012kind%3a%20PersistentVolume%2013metadata%3a%2014%20name%3a%20block-pv%2015spec%3a%2016%20accessModes%3a%2017%20-%20ReadWriteOnce%2018%20capacity%3a%2019%20storage%3a%2010Gi%2020%20persistentVolumeReclaimPolicy%3a%20Retain%2021%20storageClassName%ef%bc%9a%20aliclood-nas%2022%20volumeMode%3a%20Block%20PersistentVolumeClaim%20PersistentVolumeClaim%ef%bc%88%e6%8c%81%e4%b9%85%e5%8d%b7%e5%a3%b0%e6%98%8e%ef%bc%8c%e7%ae%80%e7%a7%b0PVC%ef%bc%89%e6%98%af%e7%94%a8%e6%88%b7%e7%9a%84%e4%b8%80%e7%a7%8d%e5%ad%98%e5%82%a8%e8%af%b7%e6%b1%82%e3%80%82%e5%ae%83%e5%92%8cPod%e7%b1%bb%e4%bc%bc%ef%bc%8cPod%e6%b6%88%e8%80%97Node%e8%b5%84%e6%ba%90%ef%bc%8c%e8%80%8cPVC%e6%b6%88%e8%80%97PV%e8%b5%84%e6%ba%90%e3%80%82Pod%e8%83%bd%e5%a4%9f%e8%af%b7%e6%b1%82%e7%89%b9%e5%ae%9a%e7%9a%84%e8%b5%84%e6%ba%90%ef%bc%88%e5%a6%82CPU%e5%92%8c%e5%86%85%e5%ad%98%ef%bc%89%e3%80%82PVC%e8%83%bd%e5%a4%9f%e8%af%b7%e6%b1%82%e6%8c%87%e5%ae%9a%e7%9a%84%e5%a4%a7%e5%b0%8f%e5%92%8c%e8%ae%bf%e9%97%ae%e7%9a%84%e6%a8%a1%e5%bc%8f%ef%bc%88%e5%8f%af%e4%bb%a5%e8%a2%ab%e6%98%a0%e5%b0%84%e4%b8%ba%e4%b8%80%e6%ac%a1%e8%af%bb%e5%86%99%e6%88%96%e8%80%85%e5%a4%9a%e6%ac%a1%e5%8f%aa%e8%af%bb%ef%bc%89%e3%80%82%20PVC%e5%85%81%e8%ae%b8%e7%94%a8%e6%88%b7%e6%b6%88%e8%80%97%e6%8a%bd%e8%b1%a1%e7%9a%84%e5%ad%98%e5%82%a8%e8%b5%84%e6%ba%90%ef%bc%8c%e7%94%a8%e6%88%b7%e4%b9%9f%e7%bb%8f%e5%b8%b8%e9%9c%80%e8%a6%81%e5%90%84%e7%a7%8d%e5%b1%9e%e6%80%a7%ef%bc%88%e5%a6%82%e6%80%a7%e8%83%bd%ef%bc%89%e7%9a%84PV%e3%80%82%e9%9b%86%e7%be%a4%e7%ae%a1%e7%90%86%e5%91%98%e9%9c%80%e8%a6%81%e6%8f%90%e4%be%9b%e5%90%84%e7%a7%8d%e5%90%84%e6%a0%b7%e3%80%81%e4%b8%8d%e5%90%8c%e5%a4%a7%e5%b0%8f%e3%80%81%e4%b8%8d%e5%90%8c%e8%ae%bf%e9%97%ae%e6%a8%a1%e5%bc%8f%e7%9a%84PV%ef%bc%8c%e8%80%8c%e4%b8%8d%e7%94%a8%e5%90%91%e7%94%a8%e6%88%b7%e6%9a%b4%e9%9c%b2%e8%bf%99%e4%ba%9bvolume%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e7%9a%84%e7%bb%86%e8%8a%82%e3%80%82%e5%9b%a0%e4%b8%ba%e8%bf%99%e7%a7%8d%e9%9c%80%e6%b1%82%ef%bc%8c%e5%b0%b1%e5%82%ac%e7%94%9f%e5%87%ba%e4%b8%80%e7%a7%8dStorageClass%e8%b5%84%e6%ba%90%e3%80%82%0a1%20%23%20accessModes%20%26lt%3b%5b%5dstring%26gt%3b%202%20%23%20storageClassName%20%26lt%3bstring%26gt%3b%203%20%23%20volumeMode%20%26lt%3bstring%26gt%3b%204%20%23%20volumeName%20%26lt%3bstring%26gt%3b%205%20%23%20resources%20%26lt%3bObject%26gt%3b%206kind%3a%20PersistentVolumeClaim%207apiVersion%3a%20v1%208metadata%3a%209%20name%3a%20myclaim%2010spec%3a%2011%20accessModes%3a%2012%20-%20ReadWriteOnce%2013%20storageClassName%3a%20slow%2014%20volumeMode%3a%20Filesystem%2015%20resources%3a%2016%20requests%3a%2017%20storage%3a%208Gi%20StorageClass%20StorageClass%e6%8f%90%e4%be%9b%e4%ba%86%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8f%ef%bc%8c%e4%bd%bf%e5%be%97%e7%ae%a1%e7%90%86%e5%91%98%e8%83%bd%e5%a4%9f%e6%8f%8f%e8%bf%b0%e4%bb%96%e6%8f%90%e4%be%9b%e7%9a%84%e5%ad%98%e5%82%a8%e7%9a%84%e7%ad%89%e7%ba%a7%e3%80%82%e9%9b%86%e7%be%a4%e7%ae%a1%e7%90%86%e5%91%98%e5%8f%af%e4%bb%a5%e5%b0%86%e4%b8%8d%e5%90%8c%e7%9a%84%e7%ad%89%e7%ba%a7%e6%98%a0%e5%b0%84%e5%88%b0%e4%b8%8d%e5%90%8c%e7%9a%84%e6%9c%8d%e5%8a%a1%e7%ad%89%e7%ba%a7%e3%80%81%e4%b8%8d%e5%90%8c%e7%9a%84%e5%90%8e%e7%ab%af%e7%ad%96%e7%95%a5%e3%80%82%20https%3a%2f%2fkubernetes." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&t=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#概念">概念</a>
      <ul>
        <li><a href="#persistentvolume">PersistentVolume</a></li>
        <li><a href="#persistentvolumeclaim">PersistentVolumeClaim</a></li>
        <li><a href="#storageclass">StorageClass</a></li>
      </ul>
    </li>
    <li><a href="#实例">实例</a>
      <ul>
        <li>
          <ul>
            <li><a href="#local--storage">Local  Storage</a></li>
            <li><a href="#nas">NAS</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#ref">Ref</a></li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Kubernetes中的存储
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2019-05-12 22:31:20 &#43;0800 CST" itemprop="datePublished">2019-05-12</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          6 minute read
        </div>
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/k8s" rel="tag">k8s</a>
            
             ,  
            <a class="tag-link" href="/tags/storage" rel="tag">storage</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <h2 id="概念">概念</h2>
<h3 id="persistentvolume">PersistentVolume</h3>
<p><code>PersistentVolume</code>（持久卷，简称PV）是集群内，由管理员提供的网络存储的一部分。就像集群中的节点一样，PV也是集群中的一种资源。它也像Volume一样，是一种volume插件，但是它的生命周期却是和使用它的Pod相互独立的。PV这个API对象，捕获了诸如NFS、ISCSI、或其他云存储系统的实现细节。
<a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistent-volumes">https://kubernetes.io/docs/concepts/storage/persistent-volumes#persistent-volumes</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#6272a4"># kubectl explain pv.spec</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#6272a4"># KIND:     PersistentVolume</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#6272a4"># VERSION:  v1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#6272a4"># spec</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#6272a4">#    accessModes  &lt;[]string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#6272a4">#    capacity     &lt;map[string]string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#6272a4">#    mountOptions &lt;[]string&gt; 部分支持，比如NFS</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#6272a4">#    persistentVolumeReclaimPolicy        &lt;string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#6272a4">#    storageClassName     &lt;string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#6272a4">#    volumeMode   &lt;string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#ff79c6">kind</span>: PersistentVolume
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>  <span style="color:#ff79c6">name</span>: block-pv
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>  <span style="color:#ff79c6">accessModes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>    - ReadWriteOnce
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>  <span style="color:#ff79c6">capacity</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>    <span style="color:#ff79c6">storage</span>: 10Gi
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>  <span style="color:#ff79c6">persistentVolumeReclaimPolicy</span>: Retain  
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>  storageClassName： aliclood-nas
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>  <span style="color:#ff79c6">volumeMode</span>: Block
</code></pre></div><h3 id="persistentvolumeclaim">PersistentVolumeClaim</h3>
<p><code>PersistentVolumeClaim</code>（持久卷声明，简称PVC）是用户的一种存储请求。它和Pod类似，Pod消耗Node资源，而PVC消耗PV资源。Pod能够请求特定的资源（如CPU和内存）。PVC能够请求指定的大小和访问的模式（可以被映射为一次读写或者多次只读）。
PVC允许用户消耗抽象的存储资源，用户也经常需要各种属性（如性能）的PV。集群管理员需要提供各种各样、不同大小、不同访问模式的PV，而不用向用户暴露这些volume如何实现的细节。因为这种需求，就催生出一种<code>StorageClass</code>资源。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>  <span style="color:#6272a4">#  accessModes          &lt;[]string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>  <span style="color:#6272a4">#  storageClassName     &lt;string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>  <span style="color:#6272a4">#  volumeMode           &lt;string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#6272a4">#  volumeName           &lt;string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>  <span style="color:#6272a4">#  resources            &lt;Object&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#ff79c6">kind</span>: PersistentVolumeClaim
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#ff79c6">name</span>: myclaim
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>  <span style="color:#ff79c6">accessModes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>    - ReadWriteOnce
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>  <span style="color:#ff79c6">storageClassName</span>: slow
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>  <span style="color:#ff79c6">volumeMode</span>: Filesystem
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>  <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>    <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>      <span style="color:#ff79c6">storage</span>: 8Gi
</code></pre></div><h3 id="storageclass">StorageClass</h3>
<p><code>StorageClass</code>提供了一种方式，使得管理员能够描述他提供的存储的等级。集群管理员可以将不同的等级映射到不同的服务等级、不同的后端策略。
<a href="https://kubernetes.io/docs/concepts/storage/storage-classes/">https://kubernetes.io/docs/concepts/storage/storage-classes/</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>  <span style="color:#6272a4">#  mountOptions &lt;[]string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>  <span style="color:#6272a4">#  parameters   &lt;map[string]string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>  <span style="color:#6272a4">#  provisioner  &lt;string&gt; -required-</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#6272a4">#  reclaimPolicy        &lt;string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>  <span style="color:#6272a4">#  volumeBindingMode    &lt;string&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#ff79c6">apiVersion</span>: storage.k8s.io/v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#ff79c6">kind</span>: StorageClass
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#ff79c6">name</span>: alicloud-nas
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#ff79c6">mountOptions</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>- vers=4.0
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#ff79c6">provisioner</span>: alicloud/nas
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#ff79c6">reclaimPolicy</span>: Retain
</code></pre></div><h2 id="实例">实例</h2>
<h4 id="local--storage">Local  Storage</h4>
<p>首先要创建StorageClass。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>cat &lt;&lt;EOF | kubectl apply -f -
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#ff79c6">kind</span>: StorageClass
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">apiVersion</span>: storage.k8s.io/v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>  <span style="color:#ff79c6">name</span>: local-storage
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#ff79c6">provisioner</span>: kubernetes.io/no-provisioner
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#ff79c6">volumeBindingMode</span>: WaitForFirstConsumer
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>EOF
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>kubectl get sc
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>NAME            PROVISIONER                    AGE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>local-storage   kubernetes.io/no-provisioner   3s
</code></pre></div><h5 id="创建pv">创建PV</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>cat &lt;&lt;EOF | kubectl apply -f -
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">kind</span>: PersistentVolume
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>  <span style="color:#ff79c6">name</span>: example-local-pv
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">capacity</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>    <span style="color:#ff79c6">storage</span>: 1Gi
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#ff79c6">accessModes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>  - ReadWriteOnce
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>  <span style="color:#ff79c6">persistentVolumeReclaimPolicy</span>: Retain
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>  <span style="color:#ff79c6">storageClassName</span>: local-storage
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>  <span style="color:#ff79c6">local</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>    <span style="color:#ff79c6">path</span>: /mnt/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>  <span style="color:#ff79c6">nodeAffinity</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>    <span style="color:#ff79c6">required</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>      <span style="color:#ff79c6">nodeSelectorTerms</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>      - <span style="color:#ff79c6">matchExpressions</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>        - <span style="color:#ff79c6">key</span>: kubernetes.io/hostname
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>          <span style="color:#ff79c6">operator</span>: In
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>          <span style="color:#ff79c6">values</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>          - master1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>EOF
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>kubectl get pv
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>NAME               CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS     CLAIM                         STORAGECLASS    REASON    AGE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>example-local-pv   1Gi        RWO            Retain           Available             local-storage             3s
</code></pre></div><p>如果hostname没有指定，则会报错。<code>The PersistentVolume &quot;example-local-pv&quot; is invalid: metadata.annotations: Required value: Local volume requires node affinity</code></p>
<h5 id="创建pvc">创建PVC</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>cat &lt;&lt;EOF | kubectl apply -f -
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#ff79c6">kind</span>: PersistentVolumeClaim
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>  <span style="color:#ff79c6">name</span>: example-local-claim
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">accessModes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  - ReadWriteOnce
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>    <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>      <span style="color:#ff79c6">storage</span>: 1Gi
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>  <span style="color:#ff79c6">storageClassName</span>: local-storage
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>EOF
</code></pre></div><h5 id="使用pvc">使用PVC</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>cat &lt;&lt;EOF | kubectl apply -f -
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#ff79c6">apiVersion</span>: extensions/v1beta1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">kind</span>: Deployment
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>  <span style="color:#ff79c6">name</span>: nginx
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">replicas</span>: <span style="color:#bd93f9">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  <span style="color:#ff79c6">template</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>    <span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>      <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>        <span style="color:#ff79c6">run</span>: nginx
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>    <span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>      <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>      - <span style="color:#ff79c6">name</span>:  nginx
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>        <span style="color:#ff79c6">image</span>: nginx:alpine
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>        <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>        - <span style="color:#ff79c6">mountPath</span>: <span style="color:#f1fa8c">&#34;/var/www/html&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>          <span style="color:#ff79c6">name</span>: mypd
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>      <span style="color:#ff79c6">volumes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>      - <span style="color:#ff79c6">name</span>: mypd
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>        <span style="color:#ff79c6">persistentVolumeClaim</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>          <span style="color:#ff79c6">claimName</span>: example-local-claim
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>EOF
</code></pre></div><h4 id="nas">NAS</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#ff79c6">apiVersion</span>: storage.k8s.io/v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#ff79c6">kind</span>: StorageClass
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#ff79c6">name</span>: alicloud-nas
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#ff79c6">mountOptions</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>- vers=4.0
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#ff79c6">provisioner</span>: alicloud/nas
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#ff79c6">reclaimPolicy</span>: Retain
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>---
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#ff79c6">kind</span>: Deployment
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#ff79c6">apiVersion</span>: extensions/v1beta1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>  <span style="color:#ff79c6">name</span>: alicloud-nas-controller
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>  <span style="color:#ff79c6">namespace</span>: kube-system
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>  <span style="color:#ff79c6">replicas</span>: <span style="color:#bd93f9">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>  <span style="color:#ff79c6">strategy</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>    <span style="color:#ff79c6">type</span>: Recreate
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>  <span style="color:#ff79c6">template</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>    <span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>      <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>        <span style="color:#ff79c6">app</span>: alicloud-nas-controller
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>    <span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>      <span style="color:#ff79c6">tolerations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>      - <span style="color:#ff79c6">effect</span>: NoSchedule
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>        <span style="color:#ff79c6">operator</span>: Exists
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>        <span style="color:#ff79c6">key</span>: node-role.kubernetes.io/master
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>      - <span style="color:#ff79c6">effect</span>: NoSchedule
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>        <span style="color:#ff79c6">operator</span>: Exists
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>        <span style="color:#ff79c6">key</span>: node.cloudprovider.kubernetes.io/uninitialized
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>      <span style="color:#ff79c6">nodeSelector</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>        <span style="color:#ff79c6">node-role.kubernetes.io/master</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span>      <span style="color:#ff79c6">serviceAccount</span>: admin
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span>      <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span>        - <span style="color:#ff79c6">name</span>: alicloud-nas-controller
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span>          <span style="color:#ff79c6">image</span>: registry.cn-hangzhou.aliyuncs.com/acs/alicloud-nas-controller:v3.1.0-k8s1.11
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span>          <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span>          - <span style="color:#ff79c6">mountPath</span>: /persistentvolumes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span>            <span style="color:#ff79c6">name</span>: nfs-client-root
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span>          <span style="color:#ff79c6">env</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span>            - <span style="color:#ff79c6">name</span>: PROVISIONER_NAME
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span>              <span style="color:#ff79c6">value</span>: alicloud/nas
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span>            - <span style="color:#ff79c6">name</span>: NFS_SERVER
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span>              <span style="color:#ff79c6">value</span>: xxx.cn-hangzhou.nas.aliyuncs.com
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span>            - <span style="color:#ff79c6">name</span>: NFS_PATH
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span>              <span style="color:#ff79c6">value</span>: /
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span>      <span style="color:#ff79c6">volumes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span>      - <span style="color:#ff79c6">name</span>: nfs-client-root
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span>        <span style="color:#ff79c6">flexVolume</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span>          <span style="color:#ff79c6">driver</span>: alicloud/nas
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51</span>          <span style="color:#ff79c6">options</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52</span>            <span style="color:#ff79c6">path</span>: /
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53</span>            <span style="color:#ff79c6">server</span>: 0cd8b4a576-mmi32.cn-hangzhou.nas.aliyuncs.com
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54</span>            <span style="color:#ff79c6">vers</span>: <span style="color:#f1fa8c">&#34;4.0&#34;</span>
</code></pre></div><h5 id="使用volumetemplate">使用VolumeTemplate</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#ff79c6">apiVersion</span>: apps/v1beta1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#ff79c6">kind</span>: StatefulSet
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#ff79c6">name</span>: web
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>  <span style="color:#ff79c6">serviceName</span>: <span style="color:#f1fa8c">&#34;nginx&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">replicas</span>: <span style="color:#bd93f9">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  <span style="color:#ff79c6">template</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>    <span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>      <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>        <span style="color:#ff79c6">app</span>: nginx
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>    <span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>      <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>      - <span style="color:#ff79c6">name</span>: nginx
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>        <span style="color:#ff79c6">image</span>: nginx:alpine
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>        <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>        - <span style="color:#ff79c6">mountPath</span>: <span style="color:#f1fa8c">&#34;/usr/share/nginx/html/&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>          <span style="color:#ff79c6">name</span>: html
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>  <span style="color:#ff79c6">volumeClaimTemplates</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>  - <span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>      <span style="color:#ff79c6">name</span>: html
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>    <span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>      <span style="color:#ff79c6">accessModes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>        - ReadWriteOnce
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>      <span style="color:#ff79c6">storageClassName</span>: alicloud-nas
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>      <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>        <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>          <span style="color:#ff79c6">storage</span>: 2Gi
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span> 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span style="color:#6272a4"># web-html-0   Bound     pvc-487   2Gi        RWO            alicloud-nas   1h</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span style="color:#6272a4"># web-html-1   Bound     pvc-60a   2Gi        RWO            alicloud-nas   1h</span>
</code></pre></div><h2 id="ref">Ref</h2>
<p>Kubernetes存储之Persistent Volumes简介</p>
<p><a href="https://blog.csdn.net/styshoo/article/details/72235208">https://blog.csdn.net/styshoo/article/details/72235208</a></p>
<p>Local Persistent Volumes for Kubernetes Goes Beta</p>
<p><a href="https://kubernetes.io/blog/2018/04/13/local-persistent-volumes-beta/">https://kubernetes.io/blog/2018/04/13/local-persistent-volumes-beta/</a></p>
<p>使用阿里云 NAS</p>
<p><a href="https://www.alibabacloud.com/help/zh/doc-detail/88940.htm">https://www.alibabacloud.com/help/zh/doc-detail/88940.htm</a></p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Writings</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#概念">概念</a>
      <ul>
        <li><a href="#persistentvolume">PersistentVolume</a></li>
        <li><a href="#persistentvolumeclaim">PersistentVolumeClaim</a></li>
        <li><a href="#storageclass">StorageClass</a></li>
      </ul>
    </li>
    <li><a href="#实例">实例</a>
      <ul>
        <li>
          <ul>
            <li><a href="#local--storage">Local  Storage</a></li>
            <li><a href="#nas">NAS</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#ref">Ref</a></li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&text=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&title=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&is_video=false&description=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8&body=Check out this article: https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&title=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&title=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&name=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8&description=%e6%a6%82%e5%bf%b5%20PersistentVolume%20PersistentVolume%ef%bc%88%e6%8c%81%e4%b9%85%e5%8d%b7%ef%bc%8c%e7%ae%80%e7%a7%b0PV%ef%bc%89%e6%98%af%e9%9b%86%e7%be%a4%e5%86%85%ef%bc%8c%e7%94%b1%e7%ae%a1%e7%90%86%e5%91%98%e6%8f%90%e4%be%9b%e7%9a%84%e7%bd%91%e7%bb%9c%e5%ad%98%e5%82%a8%e7%9a%84%e4%b8%80%e9%83%a8%e5%88%86%e3%80%82%e5%b0%b1%e5%83%8f%e9%9b%86%e7%be%a4%e4%b8%ad%e7%9a%84%e8%8a%82%e7%82%b9%e4%b8%80%e6%a0%b7%ef%bc%8cPV%e4%b9%9f%e6%98%af%e9%9b%86%e7%be%a4%e4%b8%ad%e7%9a%84%e4%b8%80%e7%a7%8d%e8%b5%84%e6%ba%90%e3%80%82%e5%ae%83%e4%b9%9f%e5%83%8fVolume%e4%b8%80%e6%a0%b7%ef%bc%8c%e6%98%af%e4%b8%80%e7%a7%8dvolume%e6%8f%92%e4%bb%b6%ef%bc%8c%e4%bd%86%e6%98%af%e5%ae%83%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%8d%b4%e6%98%af%e5%92%8c%e4%bd%bf%e7%94%a8%e5%ae%83%e7%9a%84Pod%e7%9b%b8%e4%ba%92%e7%8b%ac%e7%ab%8b%e7%9a%84%e3%80%82PV%e8%bf%99%e4%b8%aaAPI%e5%af%b9%e8%b1%a1%ef%bc%8c%e6%8d%95%e8%8e%b7%e4%ba%86%e8%af%b8%e5%a6%82NFS%e3%80%81ISCSI%e3%80%81%e6%88%96%e5%85%b6%e4%bb%96%e4%ba%91%e5%ad%98%e5%82%a8%e7%b3%bb%e7%bb%9f%e7%9a%84%e5%ae%9e%e7%8e%b0%e7%bb%86%e8%8a%82%e3%80%82%20https%3a%2f%2fkubernetes.io%2fdocs%2fconcepts%2fstorage%2fpersistent-volumes%23persistent-volumes%0a1%23%20kubectl%20explain%20pv.spec%202%23%20KIND%3a%20PersistentVolume%203%23%20VERSION%3a%20v1%204%23%20spec%205%23%20accessModes%20%26lt%3b%5b%5dstring%26gt%3b%206%23%20capacity%20%26lt%3bmap%5bstring%5dstring%26gt%3b%207%23%20mountOptions%20%26lt%3b%5b%5dstring%26gt%3b%20%e9%83%a8%e5%88%86%e6%94%af%e6%8c%81%ef%bc%8c%e6%af%94%e5%a6%82NFS%208%23%20persistentVolumeReclaimPolicy%20%26lt%3bstring%26gt%3b%209%23%20storageClassName%20%26lt%3bstring%26gt%3b%2010%23%20volumeMode%20%26lt%3bstring%26gt%3b%2011apiVersion%3a%20v1%2012kind%3a%20PersistentVolume%2013metadata%3a%2014%20name%3a%20block-pv%2015spec%3a%2016%20accessModes%3a%2017%20-%20ReadWriteOnce%2018%20capacity%3a%2019%20storage%3a%2010Gi%2020%20persistentVolumeReclaimPolicy%3a%20Retain%2021%20storageClassName%ef%bc%9a%20aliclood-nas%2022%20volumeMode%3a%20Block%20PersistentVolumeClaim%20PersistentVolumeClaim%ef%bc%88%e6%8c%81%e4%b9%85%e5%8d%b7%e5%a3%b0%e6%98%8e%ef%bc%8c%e7%ae%80%e7%a7%b0PVC%ef%bc%89%e6%98%af%e7%94%a8%e6%88%b7%e7%9a%84%e4%b8%80%e7%a7%8d%e5%ad%98%e5%82%a8%e8%af%b7%e6%b1%82%e3%80%82%e5%ae%83%e5%92%8cPod%e7%b1%bb%e4%bc%bc%ef%bc%8cPod%e6%b6%88%e8%80%97Node%e8%b5%84%e6%ba%90%ef%bc%8c%e8%80%8cPVC%e6%b6%88%e8%80%97PV%e8%b5%84%e6%ba%90%e3%80%82Pod%e8%83%bd%e5%a4%9f%e8%af%b7%e6%b1%82%e7%89%b9%e5%ae%9a%e7%9a%84%e8%b5%84%e6%ba%90%ef%bc%88%e5%a6%82CPU%e5%92%8c%e5%86%85%e5%ad%98%ef%bc%89%e3%80%82PVC%e8%83%bd%e5%a4%9f%e8%af%b7%e6%b1%82%e6%8c%87%e5%ae%9a%e7%9a%84%e5%a4%a7%e5%b0%8f%e5%92%8c%e8%ae%bf%e9%97%ae%e7%9a%84%e6%a8%a1%e5%bc%8f%ef%bc%88%e5%8f%af%e4%bb%a5%e8%a2%ab%e6%98%a0%e5%b0%84%e4%b8%ba%e4%b8%80%e6%ac%a1%e8%af%bb%e5%86%99%e6%88%96%e8%80%85%e5%a4%9a%e6%ac%a1%e5%8f%aa%e8%af%bb%ef%bc%89%e3%80%82%20PVC%e5%85%81%e8%ae%b8%e7%94%a8%e6%88%b7%e6%b6%88%e8%80%97%e6%8a%bd%e8%b1%a1%e7%9a%84%e5%ad%98%e5%82%a8%e8%b5%84%e6%ba%90%ef%bc%8c%e7%94%a8%e6%88%b7%e4%b9%9f%e7%bb%8f%e5%b8%b8%e9%9c%80%e8%a6%81%e5%90%84%e7%a7%8d%e5%b1%9e%e6%80%a7%ef%bc%88%e5%a6%82%e6%80%a7%e8%83%bd%ef%bc%89%e7%9a%84PV%e3%80%82%e9%9b%86%e7%be%a4%e7%ae%a1%e7%90%86%e5%91%98%e9%9c%80%e8%a6%81%e6%8f%90%e4%be%9b%e5%90%84%e7%a7%8d%e5%90%84%e6%a0%b7%e3%80%81%e4%b8%8d%e5%90%8c%e5%a4%a7%e5%b0%8f%e3%80%81%e4%b8%8d%e5%90%8c%e8%ae%bf%e9%97%ae%e6%a8%a1%e5%bc%8f%e7%9a%84PV%ef%bc%8c%e8%80%8c%e4%b8%8d%e7%94%a8%e5%90%91%e7%94%a8%e6%88%b7%e6%9a%b4%e9%9c%b2%e8%bf%99%e4%ba%9bvolume%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e7%9a%84%e7%bb%86%e8%8a%82%e3%80%82%e5%9b%a0%e4%b8%ba%e8%bf%99%e7%a7%8d%e9%9c%80%e6%b1%82%ef%bc%8c%e5%b0%b1%e5%82%ac%e7%94%9f%e5%87%ba%e4%b8%80%e7%a7%8dStorageClass%e8%b5%84%e6%ba%90%e3%80%82%0a1%20%23%20accessModes%20%26lt%3b%5b%5dstring%26gt%3b%202%20%23%20storageClassName%20%26lt%3bstring%26gt%3b%203%20%23%20volumeMode%20%26lt%3bstring%26gt%3b%204%20%23%20volumeName%20%26lt%3bstring%26gt%3b%205%20%23%20resources%20%26lt%3bObject%26gt%3b%206kind%3a%20PersistentVolumeClaim%207apiVersion%3a%20v1%208metadata%3a%209%20name%3a%20myclaim%2010spec%3a%2011%20accessModes%3a%2012%20-%20ReadWriteOnce%2013%20storageClassName%3a%20slow%2014%20volumeMode%3a%20Filesystem%2015%20resources%3a%2016%20requests%3a%2017%20storage%3a%208Gi%20StorageClass%20StorageClass%e6%8f%90%e4%be%9b%e4%ba%86%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8f%ef%bc%8c%e4%bd%bf%e5%be%97%e7%ae%a1%e7%90%86%e5%91%98%e8%83%bd%e5%a4%9f%e6%8f%8f%e8%bf%b0%e4%bb%96%e6%8f%90%e4%be%9b%e7%9a%84%e5%ad%98%e5%82%a8%e7%9a%84%e7%ad%89%e7%ba%a7%e3%80%82%e9%9b%86%e7%be%a4%e7%ae%a1%e7%90%86%e5%91%98%e5%8f%af%e4%bb%a5%e5%b0%86%e4%b8%8d%e5%90%8c%e7%9a%84%e7%ad%89%e7%ba%a7%e6%98%a0%e5%b0%84%e5%88%b0%e4%b8%8d%e5%90%8c%e7%9a%84%e6%9c%8d%e5%8a%a1%e7%ad%89%e7%ba%a7%e3%80%81%e4%b8%8d%e5%90%8c%e7%9a%84%e5%90%8e%e7%ab%af%e7%ad%96%e7%95%a5%e3%80%82%20https%3a%2f%2fkubernetes." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fexample.com%2fposts%2fstorage-in-kubernets%2f&t=Kubernetes%e4%b8%ad%e7%9a%84%e5%ad%98%e5%82%a8" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2025  You 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
