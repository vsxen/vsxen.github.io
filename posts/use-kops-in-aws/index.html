<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> 在aws上使用kops部署k8s集群 | Cactus theme example</title>
  <link rel = 'canonical' href = 'https://example.com/posts/use-kops-in-aws/'>
  <meta name="description" content="随便记录点东西">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="在aws上使用kops部署k8s集群" />
<meta property="og:description" content="简介：Kubernetes Operations (kops) - Production Grade K8s Installation, Upgrades, and Management kops宣称已经达到生产级别，准备试一下kops，观察其运行控制平面的方式。官方的文档如下： https://github.com/kubernetes/kops/blob/master/docs/aws.md
安装 当然kops也是用golang写的，所以你只要下载预编译的二进制文件即可。
1# 指定版本 2https://github.com/kubernetes/kops/releases/download/1.10.0/kops-linux-amd64 3 4#最新版本 5wget -O kops https://github.com/kubernetes/kops/releases/download/$(curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d &#39;&#34;&#39; -f 4)/kops-linux-amd64 6chmod &#43;x ./kops 7sudo mv ./kops /usr/local/bin/ 8 9curl -LO https://storage.googleapis.com/kubernetes-release/release/1.10.0/bin/linux/amd64/kubectl 10 11wget -O kubectl https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl 12chmod &#43;x ./kubectl 13sudo mv ./kubectl /usr/local/bin/kubectl 14 15#awscli是用Python写的，安装Python和pip后直接运行下面命令就可以了。 16pip install awscli 创建IAM kops 需要有以下四个权限，首先创建了kops的用户组，然后创建了kops用户
 AmazonEC2FullAccess AmazonRoute53FullAccess AmazonS3FullAccess IAMFullAccess AmazonVPCFullAccess  1aws iam create-group --group-name kops 2 3aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonEC2FullAccess --group-name kops 4aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonRoute53FullAccess --group-name kops 5aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess --group-name kops 6aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/IAMFullAccess --group-name kops 7aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonVPCFullAccess --group-name kops 8 9aws iam create-user --user-name kops 10 11aws iam add-user-to-group --user-name kops --group-name kops 12 13aws iam create-access-key --user-name kops 14 15# configure the aws client to use your new IAM user 16aws configure # Use your new access and secret key here 17aws iam list-users # you should see a list of all your IAM users here 18 19# Because &#34;aws configure&#34; doesn&#39;t export these vars for kops to use, we export them now 20export AWS_ACCESS_KEY_ID=$(aws configure get aws_access_key_id) 21export AWS_SECRET_ACCESS_KEY=$(aws configure get aws_secret_access_key) 创建S3 首先我创建了一个s3的存储，用于存放kops的配置文件，然后为这个存储桶加入了版本控制" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/posts/use-kops-in-aws/" />
<meta property="article:published_time" content="2019-05-12T22:31:20+08:00" />
<meta property="article:modified_time" content="2019-05-12T22:31:20+08:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="在aws上使用kops部署k8s集群"/>
<meta name="twitter:description" content="简介：Kubernetes Operations (kops) - Production Grade K8s Installation, Upgrades, and Management kops宣称已经达到生产级别，准备试一下kops，观察其运行控制平面的方式。官方的文档如下： https://github.com/kubernetes/kops/blob/master/docs/aws.md
安装 当然kops也是用golang写的，所以你只要下载预编译的二进制文件即可。
1# 指定版本 2https://github.com/kubernetes/kops/releases/download/1.10.0/kops-linux-amd64 3 4#最新版本 5wget -O kops https://github.com/kubernetes/kops/releases/download/$(curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d &#39;&#34;&#39; -f 4)/kops-linux-amd64 6chmod &#43;x ./kops 7sudo mv ./kops /usr/local/bin/ 8 9curl -LO https://storage.googleapis.com/kubernetes-release/release/1.10.0/bin/linux/amd64/kubectl 10 11wget -O kubectl https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl 12chmod &#43;x ./kubectl 13sudo mv ./kubectl /usr/local/bin/kubectl 14 15#awscli是用Python写的，安装Python和pip后直接运行下面命令就可以了。 16pip install awscli 创建IAM kops 需要有以下四个权限，首先创建了kops的用户组，然后创建了kops用户
 AmazonEC2FullAccess AmazonRoute53FullAccess AmazonS3FullAccess IAMFullAccess AmazonVPCFullAccess  1aws iam create-group --group-name kops 2 3aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonEC2FullAccess --group-name kops 4aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonRoute53FullAccess --group-name kops 5aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess --group-name kops 6aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/IAMFullAccess --group-name kops 7aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonVPCFullAccess --group-name kops 8 9aws iam create-user --user-name kops 10 11aws iam add-user-to-group --user-name kops --group-name kops 12 13aws iam create-access-key --user-name kops 14 15# configure the aws client to use your new IAM user 16aws configure # Use your new access and secret key here 17aws iam list-users # you should see a list of all your IAM users here 18 19# Because &#34;aws configure&#34; doesn&#39;t export these vars for kops to use, we export them now 20export AWS_ACCESS_KEY_ID=$(aws configure get aws_access_key_id) 21export AWS_SECRET_ACCESS_KEY=$(aws configure get aws_secret_access_key) 创建S3 首先我创建了一个s3的存储，用于存放kops的配置文件，然后为这个存储桶加入了版本控制"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://example.com/css/styles.b7d947e05a1170a37e8b82db035a37baf568e98c7fcbe3f9dd31eac5e6a72150f9f731721fa60a1b3eed4c6a9db9c5a706d396767b698198aeea1614f88ce960.css" integrity="sha512-t9lH4FoRcKN&#43;i4LbA1o3uvVo6Yx/y&#43;P53THqxeanIVD59zFyH6YKGz7tTGqducWnBtOWdntpgZiu6hYU&#43;IzpYA=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://example.com/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://example.com/posts/coredns/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://example.com/posts/storage-in-kubernets/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&text=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&title=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&is_video=false&description=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4&body=Check out this article: https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&title=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&title=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&name=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4&description=%e7%ae%80%e4%bb%8b%ef%bc%9aKubernetes%20Operations%20%28kops%29%20-%20Production%20Grade%20K8s%20Installation%2c%20Upgrades%2c%20and%20Management%20kops%e5%ae%a3%e7%a7%b0%e5%b7%b2%e7%bb%8f%e8%be%be%e5%88%b0%e7%94%9f%e4%ba%a7%e7%ba%a7%e5%88%ab%ef%bc%8c%e5%87%86%e5%a4%87%e8%af%95%e4%b8%80%e4%b8%8bkops%ef%bc%8c%e8%a7%82%e5%af%9f%e5%85%b6%e8%bf%90%e8%a1%8c%e6%8e%a7%e5%88%b6%e5%b9%b3%e9%9d%a2%e7%9a%84%e6%96%b9%e5%bc%8f%e3%80%82%e5%ae%98%e6%96%b9%e7%9a%84%e6%96%87%e6%a1%a3%e5%a6%82%e4%b8%8b%ef%bc%9a%20https%3a%2f%2fgithub.com%2fkubernetes%2fkops%2fblob%2fmaster%2fdocs%2faws.md%0a%e5%ae%89%e8%a3%85%20%e5%bd%93%e7%84%b6kops%e4%b9%9f%e6%98%af%e7%94%a8golang%e5%86%99%e7%9a%84%ef%bc%8c%e6%89%80%e4%bb%a5%e4%bd%a0%e5%8f%aa%e8%a6%81%e4%b8%8b%e8%bd%bd%e9%a2%84%e7%bc%96%e8%af%91%e7%9a%84%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e5%8d%b3%e5%8f%af%e3%80%82%0a1%23%20%e6%8c%87%e5%ae%9a%e7%89%88%e6%9c%ac%202https%3a%2f%2fgithub.com%2fkubernetes%2fkops%2freleases%2fdownload%2f1.10.0%2fkops-linux-amd64%203%204%23%e6%9c%80%e6%96%b0%e7%89%88%e6%9c%ac%205wget%20-O%20kops%20https%3a%2f%2fgithub.com%2fkubernetes%2fkops%2freleases%2fdownload%2f%24%28curl%20-s%20https%3a%2f%2fapi.github.com%2frepos%2fkubernetes%2fkops%2freleases%2flatest%20%7c%20grep%20tag_name%20%7c%20cut%20-d%20%26%2339%3b%26%2334%3b%26%2339%3b%20-f%204%29%2fkops-linux-amd64%206chmod%20%2bx%20.%2fkops%207sudo%20mv%20.%2fkops%20%2fusr%2flocal%2fbin%2f%208%209curl%20-LO%20https%3a%2f%2fstorage.googleapis.com%2fkubernetes-release%2frelease%2f1.10.0%2fbin%2flinux%2famd64%2fkubectl%2010%2011wget%20-O%20kubectl%20https%3a%2f%2fstorage.googleapis.com%2fkubernetes-release%2frelease%2f%24%28curl%20-s%20https%3a%2f%2fstorage.googleapis.com%2fkubernetes-release%2frelease%2fstable.txt%29%2fbin%2flinux%2famd64%2fkubectl%2012chmod%20%2bx%20.%2fkubectl%2013sudo%20mv%20.%2fkubectl%20%2fusr%2flocal%2fbin%2fkubectl%2014%2015%23awscli%e6%98%af%e7%94%a8Python%e5%86%99%e7%9a%84%ef%bc%8c%e5%ae%89%e8%a3%85Python%e5%92%8cpip%e5%90%8e%e7%9b%b4%e6%8e%a5%e8%bf%90%e8%a1%8c%e4%b8%8b%e9%9d%a2%e5%91%bd%e4%bb%a4%e5%b0%b1%e5%8f%af%e4%bb%a5%e4%ba%86%e3%80%82%2016pip%20install%20awscli%20%e5%88%9b%e5%bb%baIAM%20kops%20%e9%9c%80%e8%a6%81%e6%9c%89%e4%bb%a5%e4%b8%8b%e5%9b%9b%e4%b8%aa%e6%9d%83%e9%99%90%ef%bc%8c%e9%a6%96%e5%85%88%e5%88%9b%e5%bb%ba%e4%ba%86kops%e7%9a%84%e7%94%a8%e6%88%b7%e7%bb%84%ef%bc%8c%e7%84%b6%e5%90%8e%e5%88%9b%e5%bb%ba%e4%ba%86kops%e7%94%a8%e6%88%b7%0a%20AmazonEC2FullAccess%20AmazonRoute53FullAccess%20AmazonS3FullAccess%20IAMFullAccess%20AmazonVPCFullAccess%20%201aws%20iam%20create-group%20--group-name%20kops%202%203aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fAmazonEC2FullAccess%20--group-name%20kops%204aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fAmazonRoute53FullAccess%20--group-name%20kops%205aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fAmazonS3FullAccess%20--group-name%20kops%206aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fIAMFullAccess%20--group-name%20kops%207aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fAmazonVPCFullAccess%20--group-name%20kops%208%209aws%20iam%20create-user%20--user-name%20kops%2010%2011aws%20iam%20add-user-to-group%20--user-name%20kops%20--group-name%20kops%2012%2013aws%20iam%20create-access-key%20--user-name%20kops%2014%2015%23%20configure%20the%20aws%20client%20to%20use%20your%20new%20IAM%20user%2016aws%20configure%20%23%20Use%20your%20new%20access%20and%20secret%20key%20here%2017aws%20iam%20list-users%20%23%20you%20should%20see%20a%20list%20of%20all%20your%20IAM%20users%20here%2018%2019%23%20Because%20%26%2334%3baws%20configure%26%2334%3b%20doesn%26%2339%3bt%20export%20these%20vars%20for%20kops%20to%20use%2c%20we%20export%20them%20now%2020export%20AWS_ACCESS_KEY_ID%3d%24%28aws%20configure%20get%20aws_access_key_id%29%2021export%20AWS_SECRET_ACCESS_KEY%3d%24%28aws%20configure%20get%20aws_secret_access_key%29%20%e5%88%9b%e5%bb%baS3%20%e9%a6%96%e5%85%88%e6%88%91%e5%88%9b%e5%bb%ba%e4%ba%86%e4%b8%80%e4%b8%aas3%e7%9a%84%e5%ad%98%e5%82%a8%ef%bc%8c%e7%94%a8%e4%ba%8e%e5%ad%98%e6%94%bekops%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%ef%bc%8c%e7%84%b6%e5%90%8e%e4%b8%ba%e8%bf%99%e4%b8%aa%e5%ad%98%e5%82%a8%e6%a1%b6%e5%8a%a0%e5%85%a5%e4%ba%86%e7%89%88%e6%9c%ac%e6%8e%a7%e5%88%b6" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&t=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#安装">安装</a></li>
    <li><a href="#创建iam">创建IAM</a></li>
    <li><a href="#创建s3">创建S3</a></li>
    <li><a href="#创建集群">创建集群</a></li>
    <li><a href="#集群信息查看">集群信息查看</a>
      <ul>
        <li><a href="#master">Master</a>
          <ul>
            <li><a href="#证书文件">证书文件</a></li>
            <li><a href="#kubelet启动参数">kubelet启动参数</a></li>
            <li><a href="#组件的mainfest配置">组件的mainfest配置</a></li>
          </ul>
        </li>
        <li><a href="#node">Node</a></li>
      </ul>
    </li>
    <li><a href="#ref">Ref</a></li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        在aws上使用kops部署k8s集群
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2019-05-12 22:31:20 &#43;0800 CST" itemprop="datePublished">2019-05-12</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          16 minute read
        </div>
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/k8s" rel="tag">k8s</a>
            
             ,  
            <a class="tag-link" href="/tags/aws" rel="tag">aws</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <p>简介：Kubernetes Operations (kops) - Production Grade K8s Installation, Upgrades, and Management
kops宣称已经达到生产级别，准备试一下kops，观察其运行控制平面的方式。官方的文档如下：
<a href="https://github.com/kubernetes/kops/blob/master/docs/aws.md">https://github.com/kubernetes/kops/blob/master/docs/aws.md</a></p>
<h2 id="安装">安装</h2>
<p>当然kops也是用golang写的，所以你只要下载预编译的二进制文件即可。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#6272a4"># 指定版本</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>https://github.com/kubernetes/kops/releases/download/1.10.0/kops-linux-amd64
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#6272a4">#最新版本</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>wget -O kops https://github.com/kubernetes/kops/releases/download/<span style="color:#ff79c6">$(</span>curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d <span style="color:#f1fa8c">&#39;&#34;&#39;</span> -f 4<span style="color:#ff79c6">)</span>/kops-linux-amd64
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>chmod +x ./kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>sudo mv ./kops /usr/local/bin/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>curl -LO https://storage.googleapis.com/kubernetes-release/release/1.10.0/bin/linux/amd64/kubectl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>wget -O kubectl https://storage.googleapis.com/kubernetes-release/release/<span style="color:#ff79c6">$(</span>curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt<span style="color:#ff79c6">)</span>/bin/linux/amd64/kubectl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>chmod +x ./kubectl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>sudo mv ./kubectl /usr/local/bin/kubectl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#6272a4">#awscli是用Python写的，安装Python和pip后直接运行下面命令就可以了。</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>pip install awscli
</code></pre></div><h2 id="创建iam">创建IAM</h2>
<p>kops 需要有以下四个权限，首先创建了kops的用户组，然后创建了kops用户</p>
<ul>
<li>AmazonEC2FullAccess</li>
<li>AmazonRoute53FullAccess</li>
<li>AmazonS3FullAccess</li>
<li>IAMFullAccess</li>
<li>AmazonVPCFullAccess</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>aws iam create-group --group-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonEC2FullAccess --group-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonRoute53FullAccess --group-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess --group-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/IAMFullAccess --group-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>aws iam attach-group-policy --policy-arn arn:aws:iam::aws:policy/AmazonVPCFullAccess --group-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>aws iam create-user --user-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>aws iam add-user-to-group --user-name kops --group-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>aws iam create-access-key --user-name kops
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#6272a4"># configure the aws client to use your new IAM user</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>aws configure           <span style="color:#6272a4"># Use your new access and secret key here</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>aws iam list-users      <span style="color:#6272a4"># you should see a list of all your IAM users here</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#6272a4"># Because &#34;aws configure&#34; doesn&#39;t export these vars for kops to use, we export them now</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">AWS_ACCESS_KEY_ID</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>aws configure get aws_access_key_id<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">AWS_SECRET_ACCESS_KEY</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>aws configure get aws_secret_access_key<span style="color:#ff79c6">)</span>
</code></pre></div><h2 id="创建s3">创建S3</h2>
<p>首先我创建了一个s3的存储，用于存放kops的配置文件，然后为这个存储桶加入了版本控制</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>aws s3api create-bucket <span style="color:#f1fa8c">\
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span style="color:#f1fa8c"></span>    --bucket k8s-lc-demo <span style="color:#f1fa8c">\
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span style="color:#f1fa8c"></span>    --region ap-southeast-1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>    
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>aws s3api put-bucket-versioning --bucket k8s-lc-demo --versioning-configuration <span style="color:#8be9fd;font-style:italic">Status</span><span style="color:#ff79c6">=</span>Enabled
</code></pre></div><h2 id="创建集群">创建集群</h2>
<p>首先需要配置一下kops在S3上的存储路径，然后我指定了集群在三个可用区，一个VPC,三个子网
网络方案采用calico（默认是kubenet），一个Node，一个master。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">KOPS_STATE_STORE</span><span style="color:#ff79c6">=</span>s3://k8s-lc-demo
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#8be9fd;font-style:italic">export</span> <span style="color:#8be9fd;font-style:italic">NAME</span><span style="color:#ff79c6">=</span>vsxen.k8s.local
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>kops create cluster --name<span style="color:#ff79c6">=</span><span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">NAME</span><span style="color:#f1fa8c">}</span> <span style="color:#f1fa8c">\
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#f1fa8c"></span>--zones<span style="color:#ff79c6">=</span>ap-southeast-1a,ap-southeast-1b,ap-southeast-1c <span style="color:#f1fa8c">\
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#f1fa8c"></span>--vpc<span style="color:#ff79c6">=</span>vpc-0d594dbc069d8feef <span style="color:#f1fa8c">\
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#f1fa8c"></span>--subnets<span style="color:#ff79c6">=</span>subnet-0eae91c9b2ff47237,subnet-0698d31499240ac10,subnet-0f104beb16bd44abf <span style="color:#f1fa8c">\
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#f1fa8c"></span>--node-count<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1</span> --networking<span style="color:#ff79c6">=</span>calico --master-count<span style="color:#ff79c6">=</span><span style="color:#bd93f9">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>kops update cluster <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">NAME</span><span style="color:#f1fa8c">}</span> --yes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>kops delete cluster <span style="color:#f1fa8c">${</span><span style="color:#8be9fd;font-style:italic">NAME</span><span style="color:#f1fa8c">}</span> --yes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>看看别的参数
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>Flags:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>      --admin-access strings             Restrict API access to this CIDR.  If not set, access will not be restricted by IP. <span style="color:#ff79c6">(</span>default <span style="color:#ff79c6">[</span>0.0.0.0/0<span style="color:#ff79c6">])</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>      --api-loadbalancer-type string     Sets the API loadbalancer <span style="color:#8be9fd;font-style:italic">type</span> to either <span style="color:#f1fa8c">&#39;public&#39;</span> or <span style="color:#f1fa8c">&#39;internal&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>      --api-ssl-certificate string       Currently only supported in AWS. Sets the ARN of the SSL Certificate to use <span style="color:#ff79c6">for</span> the API server loadbalancer.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>      --associate-public-ip              Specify --associate-public-ip<span style="color:#ff79c6">=[</span>true|false<span style="color:#ff79c6">]</span> to enable/disable association of public IP <span style="color:#ff79c6">for</span> master ASG and nodes. Default is <span style="color:#f1fa8c">&#39;true&#39;</span>.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>      --authorization string             Authorization mode to use: AlwaysAllow or RBAC <span style="color:#ff79c6">(</span>default <span style="color:#f1fa8c">&#34;RBAC&#34;</span><span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>      --bastion                          Pass the --bastion flag to <span style="color:#8be9fd;font-style:italic">enable</span> a bastion instance group. Only applies to private topology.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>      --channel string                   Channel <span style="color:#ff79c6">for</span> default versions and configuration to use <span style="color:#ff79c6">(</span>default <span style="color:#f1fa8c">&#34;stable&#34;</span><span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>      --cloud string                     Cloud provider to use - gce, aws, vsphere
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>      --cloud-labels string              A list of KV pairs used to tag all instance groups in AWS <span style="color:#ff79c6">(</span>eg <span style="color:#f1fa8c">&#34;Owner=John Doe,Team=Some Team&#34;</span><span style="color:#ff79c6">)</span>.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>      --dns string                       DNS hosted zone to use: public|private. Default is <span style="color:#f1fa8c">&#39;public&#39;</span>. <span style="color:#ff79c6">(</span>default <span style="color:#f1fa8c">&#34;Public&#34;</span><span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>      --dns-zone string                  DNS hosted zone to use <span style="color:#ff79c6">(</span>defaults to longest matching zone<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>      --dry-run                          If true, only print the object that would be sent, without sending it. This flag can be used to create a cluster YAML or JSON manifest.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>      --encrypt-etcd-storage             Generate key in aws kms and use it <span style="color:#ff79c6">for</span> encrypt etcd volumes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>  -h, --help                             <span style="color:#8be9fd;font-style:italic">help</span> <span style="color:#ff79c6">for</span> cluster
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>      --image string                     Image to use <span style="color:#ff79c6">for</span> all instances.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span>      --kubernetes-version string        Version of kubernetes to run <span style="color:#ff79c6">(</span>defaults to version in channel<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span>      --master-count int32               Set the number of masters.  Defaults to one master per master-zone
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span>      --master-public-name string        Sets the public master public name
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span>      --master-security-groups strings   Add precreated additional security groups to masters.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span>      --master-size string               Set instance size <span style="color:#ff79c6">for</span> masters
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span>      --master-tenancy string            The tenancy of the master group on AWS. Can either be default or dedicated.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span>      --master-volume-size int32         Set instance volume size <span style="color:#ff79c6">(</span>in GB<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">for</span> masters
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span>      --master-zones strings             Zones in which to run masters <span style="color:#ff79c6">(</span>must be an odd number<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span>      --model string                     Models to apply <span style="color:#ff79c6">(</span>separate multiple models with commas<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">(</span>default <span style="color:#f1fa8c">&#34;proto,cloudup&#34;</span><span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span>      --network-cidr string              Set to override the default network CIDR
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span>      --networking string                Networking mode to use.  kubenet <span style="color:#ff79c6">(</span>default<span style="color:#ff79c6">)</span>, classic, external, kopeio-vxlan <span style="color:#ff79c6">(</span>or kopeio<span style="color:#ff79c6">)</span>, weave, flannel-vxlan <span style="color:#ff79c6">(</span>or flannel<span style="color:#ff79c6">)</span>, flannel-udp, calico, canal, kube-router, romana, amazon-vpc-routed-eni, cilium. <span style="color:#ff79c6">(</span>default <span style="color:#f1fa8c">&#34;kubenet&#34;</span><span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span>      --node-count int32                 Set the number of nodes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span>      --node-security-groups strings     Add precreated additional security groups to nodes.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span>      --node-size string                 Set instance size <span style="color:#ff79c6">for</span> nodes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span>      --node-tenancy string              The tenancy of the node group on AWS. Can be either default or dedicated.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span>      --node-volume-size int32           Set instance volume size <span style="color:#ff79c6">(</span>in GB<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">for</span> nodes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span>      --out string                       Path to write any <span style="color:#8be9fd;font-style:italic">local</span> output
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span>  -o, --output string                    Output format. One of json|yaml. Used with the --dry-run flag.
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51</span>      --project string                   Project to use <span style="color:#ff79c6">(</span>must be <span style="color:#8be9fd;font-style:italic">set</span> on GCE<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52</span>      --ssh-access strings               Restrict SSH access to this CIDR.  If not set, access will not be restricted by IP. <span style="color:#ff79c6">(</span>default <span style="color:#ff79c6">[</span>0.0.0.0/0<span style="color:#ff79c6">])</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53</span>      --ssh-public-key string            SSH public key to use <span style="color:#ff79c6">(</span>defaults to ~/.ssh/id_rsa.pub on AWS<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54</span>      --subnets strings                  Set to use shared subnets
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55</span>      --target string                    Valid targets: direct, terraform, cloudformation. Set this flag to terraform <span style="color:#ff79c6">if</span> you want kops to generate terraform <span style="color:#ff79c6">(</span>default <span style="color:#f1fa8c">&#34;direct&#34;</span><span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56</span>  -t, --topology string                  Controls network topology <span style="color:#ff79c6">for</span> the cluster. public|private. Default is <span style="color:#f1fa8c">&#39;public&#39;</span>. <span style="color:#ff79c6">(</span>default <span style="color:#f1fa8c">&#34;public&#34;</span><span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57</span>      --utility-subnets strings          Set to use shared utility subnets
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58</span>      --vpc string                       Set to use a shared VPC
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59</span>  -y, --yes                              Specify --yes to immediately create the cluster
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60</span>      --zones strings                    Zones in which to run the cluster
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61</span>
</code></pre></div><h2 id="集群信息查看">集群信息查看</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>kubectl -n kube-system get all
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>NAME                                                                           READY     STATUS    RESTARTS   AGE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>pod/dns-controller-6d6b7f78b-d59r9                                             1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>pod/etcd-server-events-ip-192-168-0-154.ap-southeast-1.compute.internal        1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>pod/etcd-server-events-ip-192-168-1-157.ap-southeast-1.compute.internal        1/1       Running   <span style="color:#bd93f9">0</span>          5m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>pod/etcd-server-events-ip-192-168-2-21.ap-southeast-1.compute.internal         1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>pod/etcd-server-ip-192-168-0-154.ap-southeast-1.compute.internal               1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>pod/etcd-server-ip-192-168-1-157.ap-southeast-1.compute.internal               1/1       Running   <span style="color:#bd93f9">0</span>          5m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>pod/etcd-server-ip-192-168-2-21.ap-southeast-1.compute.internal                1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>pod/kube-apiserver-ip-192-168-0-154.ap-southeast-1.compute.internal            1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>pod/kube-apiserver-ip-192-168-1-157.ap-southeast-1.compute.internal            1/1       Running   <span style="color:#bd93f9">0</span>          5m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>pod/kube-apiserver-ip-192-168-2-21.ap-southeast-1.compute.internal             1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>pod/kube-controller-manager-ip-192-168-0-154.ap-southeast-1.compute.internal   1/1       Running   <span style="color:#bd93f9">0</span>          5m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>pod/kube-controller-manager-ip-192-168-1-157.ap-southeast-1.compute.internal   1/1       Running   <span style="color:#bd93f9">0</span>          5m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>pod/kube-controller-manager-ip-192-168-2-21.ap-southeast-1.compute.internal    1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>pod/kube-dns-5fbcb4d67b-784mb                                                  3/3       Running   <span style="color:#bd93f9">0</span>          4m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>pod/kube-dns-5fbcb4d67b-zwvs6                                                  3/3       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>pod/kube-dns-autoscaler-6874c546dd-gmdqj                                       1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>pod/kube-proxy-ip-192-168-0-154.ap-southeast-1.compute.internal                1/1       Running   <span style="color:#bd93f9">0</span>          5m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>pod/kube-proxy-ip-192-168-1-157.ap-southeast-1.compute.internal                1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>pod/kube-proxy-ip-192-168-1-77.ap-southeast-1.compute.internal                 1/1       Running   <span style="color:#bd93f9">0</span>          4m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>pod/kube-proxy-ip-192-168-2-21.ap-southeast-1.compute.internal                 1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>pod/kube-proxy-ip-192-168-2-84.ap-southeast-1.compute.internal                 1/1       Running   <span style="color:#bd93f9">0</span>          5m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>pod/kube-scheduler-ip-192-168-0-154.ap-southeast-1.compute.internal            1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>pod/kube-scheduler-ip-192-168-1-157.ap-southeast-1.compute.internal            1/1       Running   <span style="color:#bd93f9">0</span>          5m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>pod/kube-scheduler-ip-192-168-2-21.ap-southeast-1.compute.internal             1/1       Running   <span style="color:#bd93f9">0</span>          6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>NAME               TYPE        CLUSTER-IP    EXTERNAL-IP   PORT<span style="color:#ff79c6">(</span>S<span style="color:#ff79c6">)</span>         AGE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>service/kube-dns   ClusterIP   100.64.0.10   &lt;none&gt;        53/UDP,53/TCP   6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>NAME                                  DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>deployment.apps/dns-controller        <span style="color:#bd93f9">1</span>         <span style="color:#bd93f9">1</span>         <span style="color:#bd93f9">1</span>            <span style="color:#bd93f9">1</span>           7m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span>deployment.apps/kube-dns              <span style="color:#bd93f9">2</span>         <span style="color:#bd93f9">2</span>         <span style="color:#bd93f9">2</span>            <span style="color:#bd93f9">2</span>           6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span>deployment.apps/kube-dns-autoscaler   <span style="color:#bd93f9">1</span>         <span style="color:#bd93f9">1</span>         <span style="color:#bd93f9">1</span>            <span style="color:#bd93f9">1</span>           6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span>NAME                                             DESIRED   CURRENT   READY     AGE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span>replicaset.apps/dns-controller-6d6b7f78b         <span style="color:#bd93f9">1</span>         <span style="color:#bd93f9">1</span>         <span style="color:#bd93f9">1</span>         7m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span>replicaset.apps/kube-dns-5fbcb4d67b              <span style="color:#bd93f9">2</span>         <span style="color:#bd93f9">2</span>         <span style="color:#bd93f9">2</span>         6m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span>replicaset.apps/kube-dns-autoscaler-6874c546dd   <span style="color:#bd93f9">1</span>         <span style="color:#bd93f9">1</span>         <span style="color:#bd93f9">1</span>         6m
</code></pre></div><h3 id="master">Master</h3>
<p>所有的Docker镜像,看得出和kubeadm启动方式一样</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>protokube                            1.10.0              757f84ea7739        <span style="color:#bd93f9">2</span> days ago          <span style="color:#bd93f9">278</span> MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>kope/dns-controller                  1.10.0              082d4c9dd8fe        <span style="color:#bd93f9">3</span> days ago          <span style="color:#bd93f9">119</span> MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>k8s.gcr.io/kube-proxy                v1.10.3             4261d315109d        <span style="color:#bd93f9">2</span> months ago        97.1 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>k8s.gcr.io/kube-apiserver            v1.10.3             e03746fe22c3        <span style="color:#bd93f9">2</span> months ago        <span style="color:#bd93f9">225</span> MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>k8s.gcr.io/kube-controller-manager   v1.10.3             40c8d10b2d11        <span style="color:#bd93f9">2</span> months ago        <span style="color:#bd93f9">148</span> MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>k8s.gcr.io/kube-scheduler            v1.10.3             353b8f1d102e        <span style="color:#bd93f9">2</span> months ago        50.4 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>quay.io/calico/node                  v2.6.7              7c694b9cac81        <span style="color:#bd93f9">6</span> months ago        <span style="color:#bd93f9">282</span> MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>quay.io/calico/kube-controllers      v1.0.3              34aebe64326d        <span style="color:#bd93f9">7</span> months ago        52.2 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>quay.io/calico/cni                   v1.11.2             6f0a76fc7dd2        <span style="color:#bd93f9">8</span> months ago        70.8 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>k8s.gcr.io/pause-amd64               3.0                 99e59f495ffa        <span style="color:#bd93f9">2</span> years ago         <span style="color:#bd93f9">747</span> kB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>k8s.gcr.io/etcd                      2.2.1               ef5842ca5c42        <span style="color:#bd93f9">2</span> years ago         28.2 MB
</code></pre></div><h4 id="证书文件">证书文件</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>/srv/kubernetes/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>apiserver-aggregator-ca.cert  apiserver-aggregator.key  basic_auth.csv  ca.key            proxy-client.cert  server.cert
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>apiserver-aggregator.cert     assets                    ca.crt          known_tokens.csv  proxy-client.key   server.key
</code></pre></div><h4 id="kubelet启动参数">kubelet启动参数</h4>
<p>这里并没有像kubeadm那样配置另外的参数</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>cat /etc/sysconfig/kubelet
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#8be9fd;font-style:italic">DAEMON_ARGS</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;--allow-privileged=true  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#f1fa8c">--cgroup-root=/  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#f1fa8c">--cloud-provider=aws  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#f1fa8c">--cluster-dns=100.64.0.10  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#f1fa8c">--cluster-domain=cluster.local  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#f1fa8c">--enable-debugging-handlers=true  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#f1fa8c">--eviction-hard=memory.available&lt;100Mi,nodefs.available&lt;10%,nodefs.inodesFree&lt;5%,imagefs.available&lt;10%,imagefs.inodesFree&lt;5%  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#f1fa8c">--feature-gates=ExperimentalCriticalPodAnnotation=true  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#f1fa8c">--hostname-override=ip-192-168-0-114.ap-southeast-1.compute.internal  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#f1fa8c">--kubeconfig=/var/lib/kubelet/kubeconfig  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#f1fa8c">--network-plugin=cni  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#f1fa8c">--node-labels=kops.k8s.io/instancegroup=master-ap-southeast-1a,kubernetes.io/role=master,node-role.kubernetes.io/master=  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#f1fa8c">--non-masquerade-cidr=100.64.0.0/10  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#f1fa8c">--pod-infra-container-image=k8s.gcr.io/pause-amd64:3.0  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span style="color:#f1fa8c">--pod-manifest-path=/etc/kubernetes/manifests  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#f1fa8c">--register-schedulable=true  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span style="color:#f1fa8c">--register-with-taints=node-role.kubernetes.io/master=:NoSchedule  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#f1fa8c">--v=2  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span style="color:#f1fa8c">--cni-bin-dir=/opt/cni/bin/  \ 
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#f1fa8c">--cni-conf-dir=/etc/cni/net.d/&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span style="color:#8be9fd;font-style:italic">HOME</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;/root&#34;</span>
</code></pre></div><h4 id="组件的mainfest配置">组件的mainfest配置</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1</span>新加的cloudconfig 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2</span>cat /etc/kubernetes/cloud.config 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3</span>[global]
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6</span>cat /etc/kubernetes/manifests/*
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8</span><span style="color:#ff79c6">kind</span>: Pod
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10</span>  <span style="color:#ff79c6">annotations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11</span>    <span style="color:#ff79c6">scheduler.alpha.kubernetes.io/critical-pod</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12</span>  <span style="color:#ff79c6">creationTimestamp</span>: <span style="color:#ff79c6">null</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13</span>  <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14</span>    <span style="color:#ff79c6">k8s-app</span>: etcd-server-events
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15</span>  <span style="color:#ff79c6">name</span>: etcd-server-events
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16</span>  <span style="color:#ff79c6">namespace</span>: kube-system
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18</span>  <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19</span>  - <span style="color:#ff79c6">command</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20</span>    - /bin/sh
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21</span>    - -c
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22</span>    - mkfifo /tmp/pipe; (tee -a /var/log/etcd.log &lt; /tmp/pipe &amp; ) ; exec /usr/local/bin/etcd  &gt;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23</span>      /tmp/pipe 2&gt;&amp;1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24</span>    <span style="color:#ff79c6">env</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25</span>    - <span style="color:#ff79c6">name</span>: ETCD_NAME
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26</span>      <span style="color:#ff79c6">value</span>: etcd-events-a
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27</span>    - <span style="color:#ff79c6">name</span>: ETCD_DATA_DIR
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28</span>      <span style="color:#ff79c6">value</span>: /var/etcd/data-events
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29</span>    - <span style="color:#ff79c6">name</span>: ETCD_LISTEN_PEER_URLS
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30</span>      <span style="color:#ff79c6">value</span>: http://0.0.0.0:2381
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31</span>    - <span style="color:#ff79c6">name</span>: ETCD_LISTEN_CLIENT_URLS
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32</span>      <span style="color:#ff79c6">value</span>: http://0.0.0.0:4002
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33</span>    - <span style="color:#ff79c6">name</span>: ETCD_ADVERTISE_CLIENT_URLS
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34</span>      <span style="color:#ff79c6">value</span>: http://etcd-events-a.internal.vsxen.k8s.local:4002
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35</span>    - <span style="color:#ff79c6">name</span>: ETCD_INITIAL_ADVERTISE_PEER_URLS
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36</span>      <span style="color:#ff79c6">value</span>: http://etcd-events-a.internal.vsxen.k8s.local:2381
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37</span>    - <span style="color:#ff79c6">name</span>: ETCD_INITIAL_CLUSTER_STATE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38</span>      <span style="color:#ff79c6">value</span>: new
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39</span>    - <span style="color:#ff79c6">name</span>: ETCD_INITIAL_CLUSTER_TOKEN
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40</span>      <span style="color:#ff79c6">value</span>: etcd-cluster-token-etcd-events
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41</span>    - <span style="color:#ff79c6">name</span>: ETCD_INITIAL_CLUSTER
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42</span>      <span style="color:#ff79c6">value</span>: etcd-events-a=http://etcd-events-a.internal.vsxen.k8s.local:2381
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43</span>    <span style="color:#ff79c6">image</span>: k8s.gcr.io/etcd:2.2.1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44</span>    <span style="color:#ff79c6">livenessProbe</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45</span>      <span style="color:#ff79c6">httpGet</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46</span>        <span style="color:#ff79c6">host</span>: <span style="color:#bd93f9">127.0.0.1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47</span>        <span style="color:#ff79c6">path</span>: /health
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48</span>        <span style="color:#ff79c6">port</span>: <span style="color:#bd93f9">4002</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49</span>        <span style="color:#ff79c6">scheme</span>: HTTP
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50</span>      <span style="color:#ff79c6">initialDelaySeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51</span>      <span style="color:#ff79c6">timeoutSeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52</span>    <span style="color:#ff79c6">name</span>: etcd-container
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53</span>    <span style="color:#ff79c6">ports</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54</span>    - <span style="color:#ff79c6">containerPort</span>: <span style="color:#bd93f9">2381</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55</span>      <span style="color:#ff79c6">hostPort</span>: <span style="color:#bd93f9">2381</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56</span>      <span style="color:#ff79c6">name</span>: serverport
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57</span>    - <span style="color:#ff79c6">containerPort</span>: <span style="color:#bd93f9">4002</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58</span>      <span style="color:#ff79c6">hostPort</span>: <span style="color:#bd93f9">4002</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59</span>      <span style="color:#ff79c6">name</span>: clientport
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60</span>    <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61</span>      <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62</span>        <span style="color:#ff79c6">cpu</span>: 100m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63</span>    <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64</span>    - <span style="color:#ff79c6">mountPath</span>: /var/etcd/data-events
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65</span>      <span style="color:#ff79c6">name</span>: varetcdata
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66</span>    - <span style="color:#ff79c6">mountPath</span>: /var/log/etcd.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67</span>      <span style="color:#ff79c6">name</span>: varlogetcd
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69</span>      <span style="color:#ff79c6">name</span>: hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71</span>  <span style="color:#ff79c6">hostNetwork</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72</span>  <span style="color:#ff79c6">tolerations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73</span>  - <span style="color:#ff79c6">key</span>: CriticalAddonsOnly
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74</span>    <span style="color:#ff79c6">operator</span>: Exists
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75</span>  <span style="color:#ff79c6">volumes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77</span>      <span style="color:#ff79c6">path</span>: /mnt/master-vol-0e93463fa81c17e96/var/etcd/data-events
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78</span>    <span style="color:#ff79c6">name</span>: varetcdata
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80</span>      <span style="color:#ff79c6">path</span>: /var/log/etcd-events.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81</span>    <span style="color:#ff79c6">name</span>: varlogetcd
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83</span>      <span style="color:#ff79c6">path</span>: /etc/hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84</span>    <span style="color:#ff79c6">name</span>: hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85</span><span style="color:#ff79c6">status</span>: {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87</span><span style="color:#ff79c6">kind</span>: Pod
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89</span>  <span style="color:#ff79c6">annotations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90</span>    <span style="color:#ff79c6">scheduler.alpha.kubernetes.io/critical-pod</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91</span>  <span style="color:#ff79c6">creationTimestamp</span>: <span style="color:#ff79c6">null</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92</span>  <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93</span>    <span style="color:#ff79c6">k8s-app</span>: etcd-server
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94</span>  <span style="color:#ff79c6">name</span>: etcd-server
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95</span>  <span style="color:#ff79c6">namespace</span>: kube-system
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97</span>  <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98</span>  - <span style="color:#ff79c6">command</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99</span>    - /bin/sh
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100</span>    - -c
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101</span>    - mkfifo /tmp/pipe; (tee -a /var/log/etcd.log &lt; /tmp/pipe &amp; ) ; exec /usr/local/bin/etcd  &gt;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102</span>      /tmp/pipe 2&gt;&amp;1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103</span>    <span style="color:#ff79c6">env</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104</span>    - <span style="color:#ff79c6">name</span>: ETCD_NAME
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105</span>      <span style="color:#ff79c6">value</span>: etcd-a
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106</span>    - <span style="color:#ff79c6">name</span>: ETCD_DATA_DIR
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107</span>      <span style="color:#ff79c6">value</span>: /var/etcd/data
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108</span>    - <span style="color:#ff79c6">name</span>: ETCD_LISTEN_PEER_URLS
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109</span>      <span style="color:#ff79c6">value</span>: http://0.0.0.0:2380
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110</span>    - <span style="color:#ff79c6">name</span>: ETCD_LISTEN_CLIENT_URLS
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111</span>      <span style="color:#ff79c6">value</span>: http://0.0.0.0:4001
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112</span>    - <span style="color:#ff79c6">name</span>: ETCD_ADVERTISE_CLIENT_URLS
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113</span>      <span style="color:#ff79c6">value</span>: http://etcd-a.internal.vsxen.k8s.local:4001
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114</span>    - <span style="color:#ff79c6">name</span>: ETCD_INITIAL_ADVERTISE_PEER_URLS
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115</span>      <span style="color:#ff79c6">value</span>: http://etcd-a.internal.vsxen.k8s.local:2380
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116</span>    - <span style="color:#ff79c6">name</span>: ETCD_INITIAL_CLUSTER_STATE
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117</span>      <span style="color:#ff79c6">value</span>: new
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118</span>    - <span style="color:#ff79c6">name</span>: ETCD_INITIAL_CLUSTER_TOKEN
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119</span>      <span style="color:#ff79c6">value</span>: etcd-cluster-token-etcd
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120</span>    - <span style="color:#ff79c6">name</span>: ETCD_INITIAL_CLUSTER
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121</span>      <span style="color:#ff79c6">value</span>: etcd-a=http://etcd-a.internal.vsxen.k8s.local:2380
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122</span>    <span style="color:#ff79c6">image</span>: k8s.gcr.io/etcd:2.2.1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123</span>    <span style="color:#ff79c6">livenessProbe</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124</span>      <span style="color:#ff79c6">httpGet</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125</span>        <span style="color:#ff79c6">host</span>: <span style="color:#bd93f9">127.0.0.1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126</span>        <span style="color:#ff79c6">path</span>: /health
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127</span>        <span style="color:#ff79c6">port</span>: <span style="color:#bd93f9">4001</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128</span>        <span style="color:#ff79c6">scheme</span>: HTTP
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129</span>      <span style="color:#ff79c6">initialDelaySeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130</span>      <span style="color:#ff79c6">timeoutSeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131</span>    <span style="color:#ff79c6">name</span>: etcd-container
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132</span>    <span style="color:#ff79c6">ports</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133</span>    - <span style="color:#ff79c6">containerPort</span>: <span style="color:#bd93f9">2380</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134</span>      <span style="color:#ff79c6">hostPort</span>: <span style="color:#bd93f9">2380</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135</span>      <span style="color:#ff79c6">name</span>: serverport
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136</span>    - <span style="color:#ff79c6">containerPort</span>: <span style="color:#bd93f9">4001</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137</span>      <span style="color:#ff79c6">hostPort</span>: <span style="color:#bd93f9">4001</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138</span>      <span style="color:#ff79c6">name</span>: clientport
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139</span>    <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140</span>      <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141</span>        <span style="color:#ff79c6">cpu</span>: 200m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142</span>    <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143</span>    - <span style="color:#ff79c6">mountPath</span>: /var/etcd/data
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144</span>      <span style="color:#ff79c6">name</span>: varetcdata
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145</span>    - <span style="color:#ff79c6">mountPath</span>: /var/log/etcd.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146</span>      <span style="color:#ff79c6">name</span>: varlogetcd
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148</span>      <span style="color:#ff79c6">name</span>: hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150</span>  <span style="color:#ff79c6">hostNetwork</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151</span>  <span style="color:#ff79c6">tolerations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152</span>  - <span style="color:#ff79c6">key</span>: CriticalAddonsOnly
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153</span>    <span style="color:#ff79c6">operator</span>: Exists
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154</span>  <span style="color:#ff79c6">volumes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156</span>      <span style="color:#ff79c6">path</span>: /mnt/master-vol-0e53097f0d8a2f30d/var/etcd/data
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157</span>    <span style="color:#ff79c6">name</span>: varetcdata
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159</span>      <span style="color:#ff79c6">path</span>: /var/log/etcd.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160</span>    <span style="color:#ff79c6">name</span>: varlogetcd
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162</span>      <span style="color:#ff79c6">path</span>: /etc/hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163</span>    <span style="color:#ff79c6">name</span>: hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164</span><span style="color:#ff79c6">status</span>: {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166</span><span style="color:#ff79c6">kind</span>: Pod
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168</span>  <span style="color:#ff79c6">annotations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169</span>    <span style="color:#ff79c6">dns.alpha.kubernetes.io/internal</span>: api.internal.vsxen.k8s.local
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170</span>    <span style="color:#ff79c6">scheduler.alpha.kubernetes.io/critical-pod</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171</span>  <span style="color:#ff79c6">creationTimestamp</span>: <span style="color:#ff79c6">null</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172</span>  <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173</span>    <span style="color:#ff79c6">k8s-app</span>: kube-apiserver
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174</span>  <span style="color:#ff79c6">name</span>: kube-apiserver
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175</span>  <span style="color:#ff79c6">namespace</span>: kube-system
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177</span>  <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178</span>  - <span style="color:#ff79c6">command</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179</span>    - /bin/sh
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180</span>    - -c
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181</span>    - mkfifo /tmp/pipe; (tee -a /var/log/kube-apiserver.log &lt; /tmp/pipe &amp; ) ; exec
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182</span>      /usr/local/bin/kube-apiserver --allow-privileged=true --anonymous-auth=false
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183</span>      --apiserver-count=1 --authorization-mode=RBAC --basic-auth-file=/srv/kubernetes/basic_auth.csv
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184</span>      --bind-address=0.0.0.0 --client-ca-file=/srv/kubernetes/ca.crt --cloud-provider=aws
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185</span>      --enable-admission-plugins=Initializers,NamespaceLifecycle,LimitRanger,ServiceAccount,PersistentVolumeLabel,DefaultStorageClass,DefaultTolerationSeconds,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,NodeRestriction,ResourceQuota
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186</span>      --etcd-quorum-read=false --etcd-servers-overrides=/events#http://127.0.0.1:4002
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187</span>      --etcd-servers=http://127.0.0.1:4001 --insecure-bind-address=127.0.0.1 --insecure-port=8080
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188</span>      --kubelet-preferred-address-types=InternalIP,Hostname,ExternalIP --proxy-client-cert-file=/srv/kubernetes/apiserver-aggregator.cert
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189</span>      --proxy-client-key-file=/srv/kubernetes/apiserver-aggregator.key --requestheader-allowed-names=aggregator
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190</span>      --requestheader-client-ca-file=/srv/kubernetes/apiserver-aggregator-ca.cert
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191</span>      --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192</span>      --requestheader-username-headers=X-Remote-User --secure-port=443 --service-cluster-ip-range=100.64.0.0/13
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193</span>      --storage-backend=etcd2 --tls-cert-file=/srv/kubernetes/server.cert --tls-private-key-file=/srv/kubernetes/server.key
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194</span>      --token-auth-file=/srv/kubernetes/known_tokens.csv --v=2 &gt; /tmp/pipe 2&gt;&amp;1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195</span>    <span style="color:#ff79c6">image</span>: k8s.gcr.io/kube-apiserver:v1.10.3
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196</span>    <span style="color:#ff79c6">livenessProbe</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197</span>      <span style="color:#ff79c6">httpGet</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198</span>        <span style="color:#ff79c6">host</span>: <span style="color:#bd93f9">127.0.0.1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199</span>        <span style="color:#ff79c6">path</span>: /healthz
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200</span>        <span style="color:#ff79c6">port</span>: <span style="color:#bd93f9">8080</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201</span>      <span style="color:#ff79c6">initialDelaySeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202</span>      <span style="color:#ff79c6">timeoutSeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203</span>    <span style="color:#ff79c6">name</span>: kube-apiserver
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204</span>    <span style="color:#ff79c6">ports</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205</span>    - <span style="color:#ff79c6">containerPort</span>: <span style="color:#bd93f9">443</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206</span>      <span style="color:#ff79c6">hostPort</span>: <span style="color:#bd93f9">443</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207</span>      <span style="color:#ff79c6">name</span>: https
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208</span>    - <span style="color:#ff79c6">containerPort</span>: <span style="color:#bd93f9">8080</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209</span>      <span style="color:#ff79c6">hostPort</span>: <span style="color:#bd93f9">8080</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210</span>      <span style="color:#ff79c6">name</span>: local
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211</span>    <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212</span>      <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213</span>        <span style="color:#ff79c6">cpu</span>: 150m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214</span>    <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216</span>      <span style="color:#ff79c6">name</span>: etcssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/pki/tls
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219</span>      <span style="color:#ff79c6">name</span>: etcpkitls
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/pki/ca-trust
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222</span>      <span style="color:#ff79c6">name</span>: etcpkica-trust
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">224</span>    - <span style="color:#ff79c6">mountPath</span>: /usr/share/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">225</span>      <span style="color:#ff79c6">name</span>: usrsharessl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">226</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">227</span>    - <span style="color:#ff79c6">mountPath</span>: /usr/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">228</span>      <span style="color:#ff79c6">name</span>: usrssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">229</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">230</span>    - <span style="color:#ff79c6">mountPath</span>: /usr/lib/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">231</span>      <span style="color:#ff79c6">name</span>: usrlibssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">232</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">233</span>    - <span style="color:#ff79c6">mountPath</span>: /usr/local/openssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">234</span>      <span style="color:#ff79c6">name</span>: usrlocalopenssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">235</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">236</span>    - <span style="color:#ff79c6">mountPath</span>: /var/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">237</span>      <span style="color:#ff79c6">name</span>: varssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">238</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">239</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/openssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">240</span>      <span style="color:#ff79c6">name</span>: etcopenssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">241</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">242</span>    - <span style="color:#ff79c6">mountPath</span>: /var/log/kube-apiserver.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">243</span>      <span style="color:#ff79c6">name</span>: logfile
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">244</span>    - <span style="color:#ff79c6">mountPath</span>: /srv/kubernetes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">245</span>      <span style="color:#ff79c6">name</span>: srvkube
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">246</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">247</span>    - <span style="color:#ff79c6">mountPath</span>: /srv/sshproxy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">248</span>      <span style="color:#ff79c6">name</span>: srvsshproxy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">249</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">250</span>  <span style="color:#ff79c6">hostNetwork</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">251</span>  <span style="color:#ff79c6">tolerations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">252</span>  - <span style="color:#ff79c6">key</span>: CriticalAddonsOnly
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">253</span>    <span style="color:#ff79c6">operator</span>: Exists
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">254</span>  <span style="color:#ff79c6">volumes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">255</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">256</span>      <span style="color:#ff79c6">path</span>: /etc/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">257</span>    <span style="color:#ff79c6">name</span>: etcssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">258</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">259</span>      <span style="color:#ff79c6">path</span>: /etc/pki/tls
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">260</span>    <span style="color:#ff79c6">name</span>: etcpkitls
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">261</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">262</span>      <span style="color:#ff79c6">path</span>: /etc/pki/ca-trust
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">263</span>    <span style="color:#ff79c6">name</span>: etcpkica-trust
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">264</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">265</span>      <span style="color:#ff79c6">path</span>: /usr/share/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">266</span>    <span style="color:#ff79c6">name</span>: usrsharessl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">267</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">268</span>      <span style="color:#ff79c6">path</span>: /usr/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">269</span>    <span style="color:#ff79c6">name</span>: usrssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">270</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">271</span>      <span style="color:#ff79c6">path</span>: /usr/lib/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">272</span>    <span style="color:#ff79c6">name</span>: usrlibssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">273</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">274</span>      <span style="color:#ff79c6">path</span>: /usr/local/openssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">275</span>    <span style="color:#ff79c6">name</span>: usrlocalopenssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">276</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">277</span>      <span style="color:#ff79c6">path</span>: /var/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">278</span>    <span style="color:#ff79c6">name</span>: varssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">279</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">280</span>      <span style="color:#ff79c6">path</span>: /etc/openssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">281</span>    <span style="color:#ff79c6">name</span>: etcopenssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">282</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">283</span>      <span style="color:#ff79c6">path</span>: /var/log/kube-apiserver.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">284</span>    <span style="color:#ff79c6">name</span>: logfile
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">285</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">286</span>      <span style="color:#ff79c6">path</span>: /srv/kubernetes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">287</span>    <span style="color:#ff79c6">name</span>: srvkube
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">288</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">289</span>      <span style="color:#ff79c6">path</span>: /srv/sshproxy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">290</span>    <span style="color:#ff79c6">name</span>: srvsshproxy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">291</span><span style="color:#ff79c6">status</span>: {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">292</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">293</span><span style="color:#ff79c6">kind</span>: Pod
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">294</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">295</span>  <span style="color:#ff79c6">annotations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">296</span>    <span style="color:#ff79c6">scheduler.alpha.kubernetes.io/critical-pod</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">297</span>  <span style="color:#ff79c6">creationTimestamp</span>: <span style="color:#ff79c6">null</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">298</span>  <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">299</span>    <span style="color:#ff79c6">k8s-app</span>: kube-controller-manager
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">300</span>  <span style="color:#ff79c6">name</span>: kube-controller-manager
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">301</span>  <span style="color:#ff79c6">namespace</span>: kube-system
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">302</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">303</span>  <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">304</span>  - <span style="color:#ff79c6">command</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">305</span>    - /bin/sh
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">306</span>    - -c
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">307</span>    - mkfifo /tmp/pipe; (tee -a /var/log/kube-controller-manager.log &lt; /tmp/pipe &amp;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">308</span>      ) ; exec /usr/local/bin/kube-controller-manager --allocate-node-cidrs=true --attach-detach-reconcile-sync-period=1m0s
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">309</span>      --cloud-provider=aws --cluster-cidr=100.96.0.0/11 --cluster-name=vsxen.k8s.local
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">310</span>      --cluster-signing-cert-file=/srv/kubernetes/ca.crt --cluster-signing-key-file=/srv/kubernetes/ca.key
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">311</span>      --configure-cloud-routes=false --kubeconfig=/var/lib/kube-controller-manager/kubeconfig
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">312</span>      --leader-elect=true --root-ca-file=/srv/kubernetes/ca.crt --service-account-private-key-file=/srv/kubernetes/server.key
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">313</span>      --use-service-account-credentials=true --v=2 &gt; /tmp/pipe 2&gt;&amp;1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">314</span>    <span style="color:#ff79c6">image</span>: k8s.gcr.io/kube-controller-manager:v1.10.3
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">315</span>    <span style="color:#ff79c6">livenessProbe</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">316</span>      <span style="color:#ff79c6">httpGet</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">317</span>        <span style="color:#ff79c6">host</span>: <span style="color:#bd93f9">127.0.0.1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">318</span>        <span style="color:#ff79c6">path</span>: /healthz
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">319</span>        <span style="color:#ff79c6">port</span>: <span style="color:#bd93f9">10252</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">320</span>      <span style="color:#ff79c6">initialDelaySeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">321</span>      <span style="color:#ff79c6">timeoutSeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">322</span>    <span style="color:#ff79c6">name</span>: kube-controller-manager
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">323</span>    <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">324</span>      <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">325</span>        <span style="color:#ff79c6">cpu</span>: 100m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">326</span>    <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">327</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">328</span>      <span style="color:#ff79c6">name</span>: etcssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">329</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">330</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/pki/tls
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">331</span>      <span style="color:#ff79c6">name</span>: etcpkitls
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">332</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">333</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/pki/ca-trust
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">334</span>      <span style="color:#ff79c6">name</span>: etcpkica-trust
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">335</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">336</span>    - <span style="color:#ff79c6">mountPath</span>: /usr/share/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">337</span>      <span style="color:#ff79c6">name</span>: usrsharessl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">338</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">339</span>    - <span style="color:#ff79c6">mountPath</span>: /usr/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">340</span>      <span style="color:#ff79c6">name</span>: usrssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">341</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">342</span>    - <span style="color:#ff79c6">mountPath</span>: /usr/lib/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">343</span>      <span style="color:#ff79c6">name</span>: usrlibssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">344</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">345</span>    - <span style="color:#ff79c6">mountPath</span>: /usr/local/openssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">346</span>      <span style="color:#ff79c6">name</span>: usrlocalopenssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">347</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">348</span>    - <span style="color:#ff79c6">mountPath</span>: /var/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">349</span>      <span style="color:#ff79c6">name</span>: varssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">350</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">351</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/openssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">352</span>      <span style="color:#ff79c6">name</span>: etcopenssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">353</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">354</span>    - <span style="color:#ff79c6">mountPath</span>: /srv/kubernetes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">355</span>      <span style="color:#ff79c6">name</span>: srvkube
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">356</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">357</span>    - <span style="color:#ff79c6">mountPath</span>: /var/log/kube-controller-manager.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">358</span>      <span style="color:#ff79c6">name</span>: logfile
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">359</span>    - <span style="color:#ff79c6">mountPath</span>: /var/lib/kube-controller-manager
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">360</span>      <span style="color:#ff79c6">name</span>: varlibkcm
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">361</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">362</span>  <span style="color:#ff79c6">hostNetwork</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">363</span>  <span style="color:#ff79c6">tolerations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">364</span>  - <span style="color:#ff79c6">key</span>: CriticalAddonsOnly
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">365</span>    <span style="color:#ff79c6">operator</span>: Exists
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">366</span>  <span style="color:#ff79c6">volumes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">367</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">368</span>      <span style="color:#ff79c6">path</span>: /etc/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">369</span>    <span style="color:#ff79c6">name</span>: etcssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">370</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">371</span>      <span style="color:#ff79c6">path</span>: /etc/pki/tls
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">372</span>    <span style="color:#ff79c6">name</span>: etcpkitls
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">373</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">374</span>      <span style="color:#ff79c6">path</span>: /etc/pki/ca-trust
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">375</span>    <span style="color:#ff79c6">name</span>: etcpkica-trust
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">376</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">377</span>      <span style="color:#ff79c6">path</span>: /usr/share/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">378</span>    <span style="color:#ff79c6">name</span>: usrsharessl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">379</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">380</span>      <span style="color:#ff79c6">path</span>: /usr/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">381</span>    <span style="color:#ff79c6">name</span>: usrssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">382</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">383</span>      <span style="color:#ff79c6">path</span>: /usr/lib/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">384</span>    <span style="color:#ff79c6">name</span>: usrlibssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">385</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">386</span>      <span style="color:#ff79c6">path</span>: /usr/local/openssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">387</span>    <span style="color:#ff79c6">name</span>: usrlocalopenssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">388</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">389</span>      <span style="color:#ff79c6">path</span>: /var/ssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">390</span>    <span style="color:#ff79c6">name</span>: varssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">391</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">392</span>      <span style="color:#ff79c6">path</span>: /etc/openssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">393</span>    <span style="color:#ff79c6">name</span>: etcopenssl
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">394</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">395</span>      <span style="color:#ff79c6">path</span>: /srv/kubernetes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">396</span>    <span style="color:#ff79c6">name</span>: srvkube
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">397</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">398</span>      <span style="color:#ff79c6">path</span>: /var/log/kube-controller-manager.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">399</span>    <span style="color:#ff79c6">name</span>: logfile
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">400</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">401</span>      <span style="color:#ff79c6">path</span>: /var/lib/kube-controller-manager
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">402</span>    <span style="color:#ff79c6">name</span>: varlibkcm
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">403</span><span style="color:#ff79c6">status</span>: {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">404</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">405</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">406</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">407</span><span style="color:#ff79c6">kind</span>: Pod
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">408</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">409</span>  <span style="color:#ff79c6">annotations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">410</span>    <span style="color:#ff79c6">scheduler.alpha.kubernetes.io/critical-pod</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">411</span>  <span style="color:#ff79c6">creationTimestamp</span>: <span style="color:#ff79c6">null</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">412</span>  <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">413</span>    <span style="color:#ff79c6">k8s-app</span>: kube-proxy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">414</span>    <span style="color:#ff79c6">tier</span>: node
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">415</span>  <span style="color:#ff79c6">name</span>: kube-proxy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">416</span>  <span style="color:#ff79c6">namespace</span>: kube-system
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">417</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">418</span>  <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">419</span>  - <span style="color:#ff79c6">command</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">420</span>    - /bin/sh
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">421</span>    - -c
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">422</span>    - mkfifo /tmp/pipe; (tee -a /var/log/kube-proxy.log &lt; /tmp/pipe &amp; ) ; exec /usr/local/bin/kube-proxy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">423</span>      --cluster-cidr=100.96.0.0/11 --conntrack-max-per-core=131072 --hostname-override=ip-192-168-0-114.ap-southeast-1.compute.internal
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">424</span>      --kubeconfig=/var/lib/kube-proxy/kubeconfig --master=https://127.0.0.1 --oom-score-adj=-998
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">425</span>      --resource-container=&#34;&#34; --v=2 &gt; /tmp/pipe 2&gt;&amp;1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">426</span>    <span style="color:#ff79c6">image</span>: k8s.gcr.io/kube-proxy:v1.10.3
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">427</span>    <span style="color:#ff79c6">name</span>: kube-proxy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">428</span>    <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">429</span>      <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">430</span>        <span style="color:#ff79c6">cpu</span>: 100m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">431</span>    <span style="color:#ff79c6">securityContext</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">432</span>      <span style="color:#ff79c6">privileged</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">433</span>    <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">434</span>    - <span style="color:#ff79c6">mountPath</span>: /var/lib/kube-proxy/kubeconfig
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">435</span>      <span style="color:#ff79c6">name</span>: kubeconfig
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">436</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">437</span>    - <span style="color:#ff79c6">mountPath</span>: /var/log/kube-proxy.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">438</span>      <span style="color:#ff79c6">name</span>: logfile
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">439</span>    - <span style="color:#ff79c6">mountPath</span>: /lib/modules
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">440</span>      <span style="color:#ff79c6">name</span>: modules
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">441</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">442</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/ssl/certs
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">443</span>      <span style="color:#ff79c6">name</span>: ssl-certs-hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">444</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">445</span>    - <span style="color:#ff79c6">mountPath</span>: /etc/hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">446</span>      <span style="color:#ff79c6">name</span>: etchosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">447</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">448</span>    - <span style="color:#ff79c6">mountPath</span>: /run/xtables.lock
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">449</span>      <span style="color:#ff79c6">name</span>: iptableslock
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">450</span>  <span style="color:#ff79c6">hostNetwork</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">451</span>  <span style="color:#ff79c6">tolerations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">452</span>  - <span style="color:#ff79c6">key</span>: CriticalAddonsOnly
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">453</span>    <span style="color:#ff79c6">operator</span>: Exists
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">454</span>  <span style="color:#ff79c6">volumes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">455</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">456</span>      <span style="color:#ff79c6">path</span>: /var/lib/kube-proxy/kubeconfig
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">457</span>    <span style="color:#ff79c6">name</span>: kubeconfig
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">458</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">459</span>      <span style="color:#ff79c6">path</span>: /var/log/kube-proxy.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">460</span>    <span style="color:#ff79c6">name</span>: logfile
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">461</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">462</span>      <span style="color:#ff79c6">path</span>: /lib/modules
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">463</span>    <span style="color:#ff79c6">name</span>: modules
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">464</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">465</span>      <span style="color:#ff79c6">path</span>: /usr/share/ca-certificates
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">466</span>    <span style="color:#ff79c6">name</span>: ssl-certs-hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">467</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">468</span>      <span style="color:#ff79c6">path</span>: /etc/hosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">469</span>    <span style="color:#ff79c6">name</span>: etchosts
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">470</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">471</span>      <span style="color:#ff79c6">path</span>: /run/xtables.lock
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">472</span>      <span style="color:#ff79c6">type</span>: FileOrCreate
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">473</span>    <span style="color:#ff79c6">name</span>: iptableslock
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">474</span><span style="color:#ff79c6">status</span>: {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">475</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">476</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">477</span><span style="color:#ff79c6">apiVersion</span>: v1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">478</span><span style="color:#ff79c6">kind</span>: Pod
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">479</span><span style="color:#ff79c6">metadata</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">480</span>  <span style="color:#ff79c6">annotations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">481</span>    <span style="color:#ff79c6">scheduler.alpha.kubernetes.io/critical-pod</span>: <span style="color:#f1fa8c">&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">482</span>  <span style="color:#ff79c6">creationTimestamp</span>: <span style="color:#ff79c6">null</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">483</span>  <span style="color:#ff79c6">labels</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">484</span>    <span style="color:#ff79c6">k8s-app</span>: kube-scheduler
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">485</span>  <span style="color:#ff79c6">name</span>: kube-scheduler
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">486</span>  <span style="color:#ff79c6">namespace</span>: kube-system
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">487</span><span style="color:#ff79c6">spec</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">488</span>  <span style="color:#ff79c6">containers</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">489</span>  - <span style="color:#ff79c6">command</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">490</span>    - /bin/sh
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">491</span>    - -c
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">492</span>    - mkfifo /tmp/pipe; (tee -a /var/log/kube-scheduler.log &lt; /tmp/pipe &amp; ) ; exec
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">493</span>      /usr/local/bin/kube-scheduler --kubeconfig=/var/lib/kube-scheduler/kubeconfig
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">494</span>      --leader-elect=true --v=2 &gt; /tmp/pipe 2&gt;&amp;1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">495</span>    <span style="color:#ff79c6">image</span>: k8s.gcr.io/kube-scheduler:v1.10.3
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">496</span>    <span style="color:#ff79c6">livenessProbe</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">497</span>      <span style="color:#ff79c6">httpGet</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">498</span>        <span style="color:#ff79c6">host</span>: <span style="color:#bd93f9">127.0.0.1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">499</span>        <span style="color:#ff79c6">path</span>: /healthz
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">500</span>        <span style="color:#ff79c6">port</span>: <span style="color:#bd93f9">10251</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">501</span>      <span style="color:#ff79c6">initialDelaySeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">502</span>      <span style="color:#ff79c6">timeoutSeconds</span>: <span style="color:#bd93f9">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">503</span>    <span style="color:#ff79c6">name</span>: kube-scheduler
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">504</span>    <span style="color:#ff79c6">resources</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">505</span>      <span style="color:#ff79c6">requests</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">506</span>        <span style="color:#ff79c6">cpu</span>: 100m
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">507</span>    <span style="color:#ff79c6">volumeMounts</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">508</span>    - <span style="color:#ff79c6">mountPath</span>: /var/lib/kube-scheduler
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">509</span>      <span style="color:#ff79c6">name</span>: varlibkubescheduler
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">510</span>      <span style="color:#ff79c6">readOnly</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">511</span>    - <span style="color:#ff79c6">mountPath</span>: /var/log/kube-scheduler.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">512</span>      <span style="color:#ff79c6">name</span>: logfile
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">513</span>  <span style="color:#ff79c6">hostNetwork</span>: <span style="color:#ff79c6">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">514</span>  <span style="color:#ff79c6">tolerations</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">515</span>  - <span style="color:#ff79c6">key</span>: CriticalAddonsOnly
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">516</span>    <span style="color:#ff79c6">operator</span>: Exists
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">517</span>  <span style="color:#ff79c6">volumes</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">518</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">519</span>      <span style="color:#ff79c6">path</span>: /var/lib/kube-scheduler
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">520</span>    <span style="color:#ff79c6">name</span>: varlibkubescheduler
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">521</span>  - <span style="color:#ff79c6">hostPath</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">522</span>      <span style="color:#ff79c6">path</span>: /var/log/kube-scheduler.log
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">523</span>    <span style="color:#ff79c6">name</span>: logfile
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">524</span><span style="color:#ff79c6">status</span>: {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">525</span>
</code></pre></div><h3 id="node">Node</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>protokube                                          1.10.0              757f84ea7739        <span style="color:#bd93f9">3</span> days ago          <span style="color:#bd93f9">278</span> MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>k8s.gcr.io/kube-proxy                              v1.10.3             4261d315109d        <span style="color:#bd93f9">2</span> months ago        97.1 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>k8s.gcr.io/k8s-dns-dnsmasq-nanny-amd64             1.14.10             6816817d9dce        <span style="color:#bd93f9">4</span> months ago        40.4 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>k8s.gcr.io/k8s-dns-kube-dns-amd64                  1.14.10             55ffe31ac578        <span style="color:#bd93f9">4</span> months ago        49.5 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>k8s.gcr.io/k8s-dns-sidecar-amd64                   1.14.10             8a7739f672b4        <span style="color:#bd93f9">4</span> months ago        41.6 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>quay.io/calico/node                                v2.6.7              7c694b9cac81        <span style="color:#bd93f9">6</span> months ago        <span style="color:#bd93f9">282</span> MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>quay.io/calico/cni                                 v1.11.2             6f0a76fc7dd2        <span style="color:#bd93f9">8</span> months ago        70.8 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>k8s.gcr.io/cluster-proportional-autoscaler-amd64   1.1.2-r2            7d892ca550df        <span style="color:#bd93f9">14</span> months ago       49.6 MB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>k8s.gcr.io/pause-amd64                             3.0                 99e59f495ffa        <span style="color:#bd93f9">2</span> years ago         <span style="color:#bd93f9">747</span> kB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>ls /srv/kubernetes/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>assets  ca.crt
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>ls /var/lib/kube*
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>/var/lib/kube-proxy:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>kubeconfig
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>/var/lib/kubelet:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>cpu_manager_state  device-plugins  kubeconfig  pki  plugin-containers  plugins  pods
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>Containers: <span style="color:#bd93f9">16</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span> Running: <span style="color:#bd93f9">16</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span> Paused: <span style="color:#bd93f9">0</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span> Stopped: <span style="color:#bd93f9">0</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>Images: <span style="color:#bd93f9">9</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>Server Version: 17.03.2-ce
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>Storage Driver: overlay
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span> Backing Filesystem: extfs
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span> Supports d_type: <span style="color:#8be9fd;font-style:italic">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>Logging Driver: json-file
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>Cgroup Driver: cgroupfs
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>Plugins: 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span> Volume: <span style="color:#8be9fd;font-style:italic">local</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span> Network: bridge host macvlan null overlay
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span>Swarm: inactive
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span>Runtimes: runc
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span>Default Runtime: runc
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span>Init Binary: docker-init
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span>containerd version: 4ab9917febca54791c5f071a9d1f404867857fcc
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span>runc version: 54296cf40ad8143b62dbcaa1d90e520a2136ddfe
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span>init version: 949e6fa
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span>Kernel Version: 4.4.121-k8s
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span>Operating System: Debian GNU/Linux <span style="color:#bd93f9">8</span> <span style="color:#ff79c6">(</span>jessie<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span>OSType: linux
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span>Architecture: x86_64
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span>CPUs: <span style="color:#bd93f9">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span>Total Memory: 3.862 GiB
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span>Name: ip-192-168-2-159
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span>ID: TGD4:ALZB:24L5:XXMG:NHF7:2PD3:QJPI:HOM2:ERS3:GOGJ:W3XX:SRMW
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span>Docker Root Dir: /var/lib/docker
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span>Debug Mode <span style="color:#ff79c6">(</span>client<span style="color:#ff79c6">)</span>: <span style="color:#8be9fd;font-style:italic">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51</span>Debug Mode <span style="color:#ff79c6">(</span>server<span style="color:#ff79c6">)</span>: <span style="color:#8be9fd;font-style:italic">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52</span>Registry: https://index.docker.io/v1/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53</span>Experimental: <span style="color:#8be9fd;font-style:italic">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54</span>Insecure Registries:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55</span> 127.0.0.0/8
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56</span>Live Restore Enabled: <span style="color:#8be9fd;font-style:italic">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57</span>
</code></pre></div><h2 id="ref">Ref</h2>
<p>在AWS中国区使用kops安装k8s完全指南</p>
<p><a href="http://blog.geekidentity.com/k8s/kops/install-k8s-with-kops-in-china/">http://blog.geekidentity.com/k8s/kops/install-k8s-with-kops-in-china/</a></p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Writings</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#安装">安装</a></li>
    <li><a href="#创建iam">创建IAM</a></li>
    <li><a href="#创建s3">创建S3</a></li>
    <li><a href="#创建集群">创建集群</a></li>
    <li><a href="#集群信息查看">集群信息查看</a>
      <ul>
        <li><a href="#master">Master</a>
          <ul>
            <li><a href="#证书文件">证书文件</a></li>
            <li><a href="#kubelet启动参数">kubelet启动参数</a></li>
            <li><a href="#组件的mainfest配置">组件的mainfest配置</a></li>
          </ul>
        </li>
        <li><a href="#node">Node</a></li>
      </ul>
    </li>
    <li><a href="#ref">Ref</a></li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&text=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&title=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&is_video=false&description=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4&body=Check out this article: https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&title=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&title=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&name=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4&description=%e7%ae%80%e4%bb%8b%ef%bc%9aKubernetes%20Operations%20%28kops%29%20-%20Production%20Grade%20K8s%20Installation%2c%20Upgrades%2c%20and%20Management%20kops%e5%ae%a3%e7%a7%b0%e5%b7%b2%e7%bb%8f%e8%be%be%e5%88%b0%e7%94%9f%e4%ba%a7%e7%ba%a7%e5%88%ab%ef%bc%8c%e5%87%86%e5%a4%87%e8%af%95%e4%b8%80%e4%b8%8bkops%ef%bc%8c%e8%a7%82%e5%af%9f%e5%85%b6%e8%bf%90%e8%a1%8c%e6%8e%a7%e5%88%b6%e5%b9%b3%e9%9d%a2%e7%9a%84%e6%96%b9%e5%bc%8f%e3%80%82%e5%ae%98%e6%96%b9%e7%9a%84%e6%96%87%e6%a1%a3%e5%a6%82%e4%b8%8b%ef%bc%9a%20https%3a%2f%2fgithub.com%2fkubernetes%2fkops%2fblob%2fmaster%2fdocs%2faws.md%0a%e5%ae%89%e8%a3%85%20%e5%bd%93%e7%84%b6kops%e4%b9%9f%e6%98%af%e7%94%a8golang%e5%86%99%e7%9a%84%ef%bc%8c%e6%89%80%e4%bb%a5%e4%bd%a0%e5%8f%aa%e8%a6%81%e4%b8%8b%e8%bd%bd%e9%a2%84%e7%bc%96%e8%af%91%e7%9a%84%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%87%e4%bb%b6%e5%8d%b3%e5%8f%af%e3%80%82%0a1%23%20%e6%8c%87%e5%ae%9a%e7%89%88%e6%9c%ac%202https%3a%2f%2fgithub.com%2fkubernetes%2fkops%2freleases%2fdownload%2f1.10.0%2fkops-linux-amd64%203%204%23%e6%9c%80%e6%96%b0%e7%89%88%e6%9c%ac%205wget%20-O%20kops%20https%3a%2f%2fgithub.com%2fkubernetes%2fkops%2freleases%2fdownload%2f%24%28curl%20-s%20https%3a%2f%2fapi.github.com%2frepos%2fkubernetes%2fkops%2freleases%2flatest%20%7c%20grep%20tag_name%20%7c%20cut%20-d%20%26%2339%3b%26%2334%3b%26%2339%3b%20-f%204%29%2fkops-linux-amd64%206chmod%20%2bx%20.%2fkops%207sudo%20mv%20.%2fkops%20%2fusr%2flocal%2fbin%2f%208%209curl%20-LO%20https%3a%2f%2fstorage.googleapis.com%2fkubernetes-release%2frelease%2f1.10.0%2fbin%2flinux%2famd64%2fkubectl%2010%2011wget%20-O%20kubectl%20https%3a%2f%2fstorage.googleapis.com%2fkubernetes-release%2frelease%2f%24%28curl%20-s%20https%3a%2f%2fstorage.googleapis.com%2fkubernetes-release%2frelease%2fstable.txt%29%2fbin%2flinux%2famd64%2fkubectl%2012chmod%20%2bx%20.%2fkubectl%2013sudo%20mv%20.%2fkubectl%20%2fusr%2flocal%2fbin%2fkubectl%2014%2015%23awscli%e6%98%af%e7%94%a8Python%e5%86%99%e7%9a%84%ef%bc%8c%e5%ae%89%e8%a3%85Python%e5%92%8cpip%e5%90%8e%e7%9b%b4%e6%8e%a5%e8%bf%90%e8%a1%8c%e4%b8%8b%e9%9d%a2%e5%91%bd%e4%bb%a4%e5%b0%b1%e5%8f%af%e4%bb%a5%e4%ba%86%e3%80%82%2016pip%20install%20awscli%20%e5%88%9b%e5%bb%baIAM%20kops%20%e9%9c%80%e8%a6%81%e6%9c%89%e4%bb%a5%e4%b8%8b%e5%9b%9b%e4%b8%aa%e6%9d%83%e9%99%90%ef%bc%8c%e9%a6%96%e5%85%88%e5%88%9b%e5%bb%ba%e4%ba%86kops%e7%9a%84%e7%94%a8%e6%88%b7%e7%bb%84%ef%bc%8c%e7%84%b6%e5%90%8e%e5%88%9b%e5%bb%ba%e4%ba%86kops%e7%94%a8%e6%88%b7%0a%20AmazonEC2FullAccess%20AmazonRoute53FullAccess%20AmazonS3FullAccess%20IAMFullAccess%20AmazonVPCFullAccess%20%201aws%20iam%20create-group%20--group-name%20kops%202%203aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fAmazonEC2FullAccess%20--group-name%20kops%204aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fAmazonRoute53FullAccess%20--group-name%20kops%205aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fAmazonS3FullAccess%20--group-name%20kops%206aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fIAMFullAccess%20--group-name%20kops%207aws%20iam%20attach-group-policy%20--policy-arn%20arn%3aaws%3aiam%3a%3aaws%3apolicy%2fAmazonVPCFullAccess%20--group-name%20kops%208%209aws%20iam%20create-user%20--user-name%20kops%2010%2011aws%20iam%20add-user-to-group%20--user-name%20kops%20--group-name%20kops%2012%2013aws%20iam%20create-access-key%20--user-name%20kops%2014%2015%23%20configure%20the%20aws%20client%20to%20use%20your%20new%20IAM%20user%2016aws%20configure%20%23%20Use%20your%20new%20access%20and%20secret%20key%20here%2017aws%20iam%20list-users%20%23%20you%20should%20see%20a%20list%20of%20all%20your%20IAM%20users%20here%2018%2019%23%20Because%20%26%2334%3baws%20configure%26%2334%3b%20doesn%26%2339%3bt%20export%20these%20vars%20for%20kops%20to%20use%2c%20we%20export%20them%20now%2020export%20AWS_ACCESS_KEY_ID%3d%24%28aws%20configure%20get%20aws_access_key_id%29%2021export%20AWS_SECRET_ACCESS_KEY%3d%24%28aws%20configure%20get%20aws_secret_access_key%29%20%e5%88%9b%e5%bb%baS3%20%e9%a6%96%e5%85%88%e6%88%91%e5%88%9b%e5%bb%ba%e4%ba%86%e4%b8%80%e4%b8%aas3%e7%9a%84%e5%ad%98%e5%82%a8%ef%bc%8c%e7%94%a8%e4%ba%8e%e5%ad%98%e6%94%bekops%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%ef%bc%8c%e7%84%b6%e5%90%8e%e4%b8%ba%e8%bf%99%e4%b8%aa%e5%ad%98%e5%82%a8%e6%a1%b6%e5%8a%a0%e5%85%a5%e4%ba%86%e7%89%88%e6%9c%ac%e6%8e%a7%e5%88%b6" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fexample.com%2fposts%2fuse-kops-in-aws%2f&t=%e5%9c%a8aws%e4%b8%8a%e4%bd%bf%e7%94%a8kops%e9%83%a8%e7%bd%b2k8s%e9%9b%86%e7%be%a4" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2025  You 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
